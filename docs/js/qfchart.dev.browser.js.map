{"version":3,"file":"qfchart.dev.browser.js","sources":["../src/components/Indicator.ts","../src/components/LayoutManager.ts","../src/Utils.ts","../src/components/SeriesBuilder.ts","../src/components/GraphicBuilder.ts","../src/components/TooltipFormatter.ts","../src/components/PluginManager.ts","../src/components/DrawingEditor.ts","../src/utils/EventBus.ts","../src/QFChart.ts","../src/components/AbstractPlugin.ts","../src/plugins/MeasureTool.ts","../src/plugins/LineTool.ts","../src/plugins/FibonacciTool.ts"],"sourcesContent":["import { Indicator as IndicatorInterface, IndicatorPlot, IndicatorPoint } from '../types';\r\n\r\nexport class Indicator implements IndicatorInterface {\r\n    public id: string;\r\n    public plots: { [name: string]: IndicatorPlot };\r\n    public paneIndex: number;\r\n    public height?: number;\r\n    public collapsed: boolean;\r\n    public titleColor?: string;\r\n    public controls?: { collapse?: boolean; maximize?: boolean };\r\n\r\n    constructor(\r\n        id: string,\r\n        plots: { [name: string]: IndicatorPlot },\r\n        paneIndex: number,\r\n        options: {\r\n            height?: number;\r\n            collapsed?: boolean;\r\n            titleColor?: string;\r\n            controls?: { collapse?: boolean; maximize?: boolean };\r\n        } = {}\r\n    ) {\r\n        this.id = id;\r\n        this.plots = plots;\r\n        this.paneIndex = paneIndex;\r\n        this.height = options.height;\r\n        this.collapsed = options.collapsed || false;\r\n        this.titleColor = options.titleColor;\r\n        this.controls = options.controls;\r\n    }\r\n\r\n    public toggleCollapse(): void {\r\n        this.collapsed = !this.collapsed;\r\n    }\r\n\r\n    public isVisible(): boolean {\r\n        return !this.collapsed;\r\n    }\r\n\r\n    /**\r\n     * Update indicator data incrementally by merging new points\r\n     *\r\n     * @param plots - New plots data to merge (same structure as constructor)\r\n     *\r\n     * @remarks\r\n     * This method merges new indicator data with existing data by timestamp.\r\n     * - New timestamps are added\r\n     * - Existing timestamps are updated with new values\r\n     * - All data is automatically sorted by time after merge\r\n     *\r\n     * **Important**: This method only updates the indicator's internal data structure.\r\n     * To see the changes reflected in the chart, you MUST call `chart.updateData()`\r\n     * after updating indicator data.\r\n     *\r\n     * **Usage Pattern**:\r\n     * ```typescript\r\n     * // 1. Update indicator data first\r\n     * indicator.updateData({\r\n     *   macd: { data: [{ time: 1234567890, value: 150 }], options: { style: 'line', color: '#2962FF' } }\r\n     * });\r\n     *\r\n     * // 2. Then update chart data to trigger re-render\r\n     * chart.updateData([\r\n     *   { time: 1234567890, open: 100, high: 105, low: 99, close: 103, volume: 1000 }\r\n     * ]);\r\n     * ```\r\n     *\r\n     * **Note**: If you update indicator data without corresponding market data changes,\r\n     * this typically indicates a recalculation scenario. In normal workflows, indicator\r\n     * values are derived from market data, so indicator updates should correspond to\r\n     * new or modified market bars.\r\n     */\r\n    public updateData(plots: { [name: string]: IndicatorPlot }): void {\r\n        Object.keys(plots).forEach((plotName) => {\r\n            if (!this.plots[plotName]) {\r\n                // New plot - add it\r\n                this.plots[plotName] = plots[plotName];\r\n            } else {\r\n                // Existing plot - merge data points\r\n                const existingPlot = this.plots[plotName];\r\n                const newPlot = plots[plotName];\r\n\r\n                // Update options if provided\r\n                if (newPlot.options) {\r\n                    existingPlot.options = { ...existingPlot.options, ...newPlot.options };\r\n                }\r\n\r\n                // Merge data points by time\r\n                const existingTimeMap = new Map<number, IndicatorPoint>();\r\n                existingPlot.data.forEach((point) => {\r\n                    existingTimeMap.set(point.time, point);\r\n                });\r\n\r\n                // Update or add new points\r\n                newPlot.data.forEach((point) => {\r\n                    existingTimeMap.set(point.time, point);\r\n                });\r\n\r\n                // Rebuild data array sorted by time\r\n                existingPlot.data = Array.from(existingTimeMap.values()).sort((a, b) => a.time - b.time);\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { QFChartOptions, Indicator as IndicatorType } from '../types';\r\n\r\nexport interface PaneConfiguration {\r\n    index: number;\r\n    height: number;\r\n    top: number;\r\n    isCollapsed: boolean;\r\n    indicatorId?: string;\r\n    titleColor?: string;\r\n    controls?: {\r\n        collapse?: boolean;\r\n        maximize?: boolean;\r\n    };\r\n}\r\n\r\nexport interface LayoutResult {\r\n    grid: any[];\r\n    xAxis: any[];\r\n    yAxis: any[];\r\n    dataZoom: any[];\r\n    paneLayout: PaneConfiguration[];\r\n    mainPaneHeight: number;\r\n    mainPaneTop: number;\r\n    pixelToPercent: number;\r\n}\r\n\r\nexport class LayoutManager {\r\n    public static calculate(\r\n        containerHeight: number,\r\n        indicators: Map<string, IndicatorType>,\r\n        options: QFChartOptions,\r\n        isMainCollapsed: boolean = false,\r\n        maximizedPaneId: string | null = null,\r\n        marketData?: import('../types').OHLCV[]\r\n    ): LayoutResult & { overlayYAxisMap: Map<string, number>; separatePaneYAxisOffset: number } {\r\n        // Calculate pixelToPercent early for maximized logic\r\n        let pixelToPercent = 0;\r\n        if (containerHeight > 0) {\r\n            pixelToPercent = (1 / containerHeight) * 100;\r\n        }\r\n\r\n        // Get Y-axis padding percentage (default 5%)\r\n        const yAxisPaddingPercent = options.yAxisPadding !== undefined ? options.yAxisPadding : 5;\r\n\r\n        // Create min/max functions that apply padding\r\n        const createMinFunction = (paddingPercent: number) => {\r\n            return (value: any) => {\r\n                const range = value.max - value.min;\r\n                const padding = range * (paddingPercent / 100);\r\n                return value.min - padding;\r\n            };\r\n        };\r\n\r\n        const createMaxFunction = (paddingPercent: number) => {\r\n            return (value: any) => {\r\n                const range = value.max - value.min;\r\n                const padding = range * (paddingPercent / 100);\r\n                return value.max + padding;\r\n            };\r\n        };\r\n\r\n        // Identify unique separate panes (indices > 0) and sort them\r\n        const separatePaneIndices = Array.from(indicators.values())\r\n            .map((ind) => ind.paneIndex)\r\n            .filter((idx) => idx > 0)\r\n            .sort((a, b) => a - b)\r\n            .filter((value, index, self) => self.indexOf(value) === index); // Unique\r\n\r\n        const hasSeparatePane = separatePaneIndices.length > 0;\r\n\r\n        // DataZoom Configuration\r\n        const dzVisible = options.dataZoom?.visible ?? true;\r\n        const dzPosition = options.dataZoom?.position ?? 'top';\r\n        const dzHeight = options.dataZoom?.height ?? 6;\r\n        const dzStart = options.dataZoom?.start ?? 0;\r\n        const dzEnd = options.dataZoom?.end ?? 100;\r\n\r\n        // Layout Calculation\r\n        let mainPaneTop = 8;\r\n        let chartAreaBottom = 92; // Default if no dataZoom at bottom\r\n\r\n        // Maximized State Logic\r\n        let maximizeTargetIndex = -1; // -1 = none\r\n\r\n        if (maximizedPaneId) {\r\n            if (maximizedPaneId === 'main') {\r\n                maximizeTargetIndex = 0;\r\n            } else {\r\n                const ind = indicators.get(maximizedPaneId);\r\n                if (ind) {\r\n                    maximizeTargetIndex = ind.paneIndex;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (maximizeTargetIndex !== -1) {\r\n            // Special Layout for Maximize\r\n            // We must generate grid/axis definitions for ALL indices to maintain series mapping,\r\n            // but hide the non-maximized ones.\r\n\r\n            const grid: any[] = [];\r\n            const xAxis: any[] = [];\r\n            const yAxis: any[] = [];\r\n            const dataZoom: any[] = []; // Hide slider, keep inside?\r\n\r\n            // DataZoom: keep inside, maybe slider if main?\r\n            // Let's keep strict maximize: Full container.\r\n            // Use defaults for maximize if not available, or preserve logic?\r\n            // The calculateMaximized doesn't use LayoutManager.calculate directly but inline logic.\r\n            // It should probably respect the same zoom?\r\n            // But here we are inside LayoutManager.calculate.\r\n\r\n            const dzStart = options.dataZoom?.start ?? 50;\r\n            const dzEnd = options.dataZoom?.end ?? 100;\r\n\r\n            // Add 'inside' zoom only if zoomOnTouch is enabled (default true)\r\n            const zoomOnTouch = options.dataZoom?.zoomOnTouch ?? true;\r\n            if (zoomOnTouch) {\r\n                dataZoom.push({ type: 'inside', xAxisIndex: 'all', start: dzStart, end: dzEnd });\r\n            }\r\n\r\n            // Need to know total panes to iterate\r\n            const maxPaneIndex = hasSeparatePane ? Math.max(...separatePaneIndices) : 0;\r\n\r\n            const paneConfigs: PaneConfiguration[] = []; // For GraphicBuilder title placement\r\n\r\n            // Iterate 0 to maxPaneIndex\r\n            for (let i = 0; i <= maxPaneIndex; i++) {\r\n                const isTarget = i === maximizeTargetIndex;\r\n\r\n                // Grid\r\n                grid.push({\r\n                    left: '10%',\r\n                    right: '10%',\r\n                    top: isTarget ? '5%' : '0%',\r\n                    height: isTarget ? '90%' : '0%',\r\n                    show: isTarget,\r\n                    containLabel: false,\r\n                });\r\n\r\n                // X-Axis\r\n                xAxis.push({\r\n                    type: 'category',\r\n                    gridIndex: i,\r\n                    data: [],\r\n                    show: isTarget,\r\n                    axisLabel: {\r\n                        show: isTarget,\r\n                        color: '#94a3b8',\r\n                        fontFamily: options.fontFamily,\r\n                    },\r\n                    axisLine: { show: isTarget, lineStyle: { color: '#334155' } },\r\n                    splitLine: {\r\n                        show: isTarget,\r\n                        lineStyle: { color: '#334155', opacity: 0.5 },\r\n                    },\r\n                });\r\n\r\n                // Y-Axis\r\n                // For maximized pane 0 (main), respect custom min/max if provided\r\n                let yMin: any;\r\n                let yMax: any;\r\n\r\n                if (i === 0 && maximizeTargetIndex === 0) {\r\n                    // Main pane is maximized, use custom values if provided\r\n                    yMin = options.yAxisMin !== undefined && options.yAxisMin !== 'auto' ? options.yAxisMin : createMinFunction(yAxisPaddingPercent);\r\n                    yMax = options.yAxisMax !== undefined && options.yAxisMax !== 'auto' ? options.yAxisMax : createMaxFunction(yAxisPaddingPercent);\r\n                } else {\r\n                    // Separate panes always use dynamic scaling\r\n                    yMin = createMinFunction(yAxisPaddingPercent);\r\n                    yMax = createMaxFunction(yAxisPaddingPercent);\r\n                }\r\n\r\n                yAxis.push({\r\n                    position: 'right',\r\n                    gridIndex: i,\r\n                    show: isTarget,\r\n                    scale: true,\r\n                    min: yMin,\r\n                    max: yMax,\r\n                    axisLabel: {\r\n                        show: isTarget,\r\n                        color: '#94a3b8',\r\n                        fontFamily: options.fontFamily,\r\n                        formatter: (value: number) => {\r\n                            if (options.yAxisLabelFormatter) {\r\n                                return options.yAxisLabelFormatter(value);\r\n                            }\r\n                            const decimals = options.yAxisDecimalPlaces !== undefined ? options.yAxisDecimalPlaces : 2;\r\n                            if (typeof value === 'number') {\r\n                                return value.toFixed(decimals);\r\n                            }\r\n                            return String(value);\r\n                        },\r\n                    },\r\n                    splitLine: {\r\n                        show: isTarget,\r\n                        lineStyle: { color: '#334155', opacity: 0.5 },\r\n                    },\r\n                });\r\n\r\n                // Reconstruct Pane Config for GraphicBuilder\r\n                // We need to return `paneLayout` so GraphicBuilder can draw the Restore button\r\n                if (i > 0) {\r\n                    // Find indicator for this pane\r\n                    const ind = Array.from(indicators.values()).find((ind) => ind.paneIndex === i);\r\n                    if (ind) {\r\n                        paneConfigs.push({\r\n                            index: i,\r\n                            height: isTarget ? 90 : 0,\r\n                            top: isTarget ? 5 : 0,\r\n                            isCollapsed: false,\r\n                            indicatorId: ind.id,\r\n                            titleColor: ind.titleColor,\r\n                            controls: ind.controls,\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            return {\r\n                grid,\r\n                xAxis,\r\n                yAxis,\r\n                dataZoom,\r\n                paneLayout: paneConfigs,\r\n                mainPaneHeight: maximizeTargetIndex === 0 ? 90 : 0,\r\n                mainPaneTop: maximizeTargetIndex === 0 ? 5 : 0,\r\n                pixelToPercent,\r\n                overlayYAxisMap: new Map(), // No overlays in maximized view\r\n                separatePaneYAxisOffset: 1, // In maximized view, no overlays, so separate panes start at 1\r\n            };\r\n        }\r\n\r\n        if (dzVisible) {\r\n            if (dzPosition === 'top') {\r\n                // DataZoom takes top 0% to dzHeight%\r\n                // Main chart starts below it with a small gap\r\n                mainPaneTop = dzHeight + 4; // dzHeight + 4% gap\r\n                chartAreaBottom = 95; // Use more space at bottom since slider is gone\r\n            } else {\r\n                // DataZoom takes bottom\r\n                // Chart ends at 100 - dzHeight - margin\r\n                chartAreaBottom = 100 - dzHeight - 2;\r\n                mainPaneTop = 8;\r\n            }\r\n        } else {\r\n            // No data zoom\r\n            mainPaneTop = 5;\r\n            chartAreaBottom = 95;\r\n        }\r\n\r\n        // We need to calculate height distribution dynamically to avoid overlap.\r\n        // Calculate gap in percent\r\n        let gapPercent = 5;\r\n        if (containerHeight > 0) {\r\n            gapPercent = (20 / containerHeight) * 100;\r\n        }\r\n\r\n        let mainHeightVal = 75; // Default if no separate pane\r\n\r\n        // Prepare separate panes configuration\r\n        let paneConfigs: PaneConfiguration[] = [];\r\n\r\n        if (hasSeparatePane) {\r\n            // Resolve heights for all separate panes\r\n            // 1. Identify panes and their requested heights\r\n            const panes = separatePaneIndices.map((idx) => {\r\n                const ind = Array.from(indicators.values()).find((i) => i.paneIndex === idx);\r\n                return {\r\n                    index: idx,\r\n                    requestedHeight: ind?.height,\r\n                    isCollapsed: ind?.collapsed ?? false,\r\n                    indicatorId: ind?.id,\r\n                    titleColor: ind?.titleColor,\r\n                    controls: ind?.controls,\r\n                };\r\n            });\r\n\r\n            // 2. Assign actual heights\r\n            // If collapsed, use small fixed height (e.g. 3%)\r\n            const resolvedPanes = panes.map((p) => ({\r\n                ...p,\r\n                height: p.isCollapsed ? 3 : p.requestedHeight !== undefined ? p.requestedHeight : 15,\r\n            }));\r\n\r\n            // 3. Calculate total space needed for indicators\r\n            const totalIndicatorHeight = resolvedPanes.reduce((sum, p) => sum + p.height, 0);\r\n            const totalGaps = resolvedPanes.length * gapPercent;\r\n            const totalBottomSpace = totalIndicatorHeight + totalGaps;\r\n\r\n            // 4. Calculate Main Chart Height\r\n            // Available space = chartAreaBottom - mainPaneTop;\r\n            const totalAvailable = chartAreaBottom - mainPaneTop;\r\n            mainHeightVal = totalAvailable - totalBottomSpace;\r\n\r\n            if (isMainCollapsed) {\r\n                mainHeightVal = 3;\r\n            } else {\r\n                // Safety check: ensure main chart has at least some space (e.g. 20%)\r\n                if (mainHeightVal < 20) {\r\n                    mainHeightVal = Math.max(mainHeightVal, 10);\r\n                }\r\n            }\r\n\r\n            // 5. Calculate positions\r\n            let currentTop = mainPaneTop + mainHeightVal + gapPercent;\r\n\r\n            paneConfigs = resolvedPanes.map((p) => {\r\n                const config = {\r\n                    index: p.index,\r\n                    height: p.height,\r\n                    top: currentTop,\r\n                    isCollapsed: p.isCollapsed,\r\n                    indicatorId: p.indicatorId,\r\n                    titleColor: p.titleColor,\r\n                    controls: p.controls,\r\n                };\r\n                currentTop += p.height + gapPercent;\r\n                return config;\r\n            });\r\n        } else {\r\n            mainHeightVal = chartAreaBottom - mainPaneTop;\r\n            if (isMainCollapsed) {\r\n                mainHeightVal = 3;\r\n            }\r\n        }\r\n\r\n        // --- Generate Grids ---\r\n        const grid: any[] = [];\r\n        // Main Grid (index 0)\r\n        grid.push({\r\n            left: '10%',\r\n            right: '10%',\r\n            top: mainPaneTop + '%',\r\n            height: mainHeightVal + '%',\r\n            containLabel: false, // We handle margins explicitly\r\n        });\r\n\r\n        // Separate Panes Grids\r\n        paneConfigs.forEach((pane) => {\r\n            grid.push({\r\n                left: '10%',\r\n                right: '10%',\r\n                top: pane.top + '%',\r\n                height: pane.height + '%',\r\n                containLabel: false,\r\n            });\r\n        });\r\n\r\n        // --- Generate X-Axes ---\r\n        const allXAxisIndices = [0, ...paneConfigs.map((_, i) => i + 1)];\r\n        const xAxis: any[] = [];\r\n\r\n        // Main X-Axis\r\n        const isMainBottom = paneConfigs.length === 0;\r\n        xAxis.push({\r\n            type: 'category',\r\n            data: [], // Will be filled by SeriesBuilder or QFChart\r\n            gridIndex: 0,\r\n            scale: true,\r\n            // boundaryGap will be set in QFChart.ts based on padding option\r\n            axisLine: {\r\n                onZero: false,\r\n                show: !isMainCollapsed,\r\n                lineStyle: { color: '#334155' },\r\n            },\r\n            splitLine: {\r\n                show: !isMainCollapsed,\r\n                lineStyle: { color: '#334155', opacity: 0.5 },\r\n            },\r\n            axisLabel: {\r\n                show: !isMainCollapsed,\r\n                color: '#94a3b8',\r\n                fontFamily: options.fontFamily || 'sans-serif',\r\n                formatter: (value: number) => {\r\n                    if (options.yAxisLabelFormatter) {\r\n                        return options.yAxisLabelFormatter(value);\r\n                    }\r\n                    const decimals = options.yAxisDecimalPlaces !== undefined ? options.yAxisDecimalPlaces : 2;\r\n                    if (typeof value === 'number') {\r\n                        return value.toFixed(decimals);\r\n                    }\r\n                    return String(value);\r\n                },\r\n            },\r\n            axisTick: { show: !isMainCollapsed },\r\n            axisPointer: {\r\n                label: {\r\n                    show: isMainBottom,\r\n                    fontSize: 11,\r\n                    backgroundColor: '#475569',\r\n                },\r\n            },\r\n        });\r\n\r\n        // Separate Panes X-Axes\r\n        paneConfigs.forEach((pane, i) => {\r\n            const isBottom = i === paneConfigs.length - 1;\r\n            xAxis.push({\r\n                type: 'category',\r\n                gridIndex: i + 1, // 0 is main\r\n                data: [], // Shared data\r\n                axisLabel: { show: false }, // Hide labels on indicator panes\r\n                axisLine: { show: !pane.isCollapsed, lineStyle: { color: '#334155' } },\r\n                axisTick: { show: false },\r\n                splitLine: { show: false },\r\n                axisPointer: {\r\n                    label: {\r\n                        show: isBottom,\r\n                        fontSize: 11,\r\n                        backgroundColor: '#475569',\r\n                    },\r\n                },\r\n            });\r\n        });\r\n\r\n        // --- Generate Y-Axes ---\r\n        const yAxis: any[] = [];\r\n\r\n        // Determine min/max for main Y-axis (respect custom values if provided)\r\n        let mainYAxisMin: any;\r\n        let mainYAxisMax: any;\r\n\r\n        if (options.yAxisMin !== undefined && options.yAxisMin !== 'auto') {\r\n            mainYAxisMin = options.yAxisMin;\r\n        } else {\r\n            mainYAxisMin = createMinFunction(yAxisPaddingPercent);\r\n        }\r\n\r\n        if (options.yAxisMax !== undefined && options.yAxisMax !== 'auto') {\r\n            mainYAxisMax = options.yAxisMax;\r\n        } else {\r\n            mainYAxisMax = createMaxFunction(yAxisPaddingPercent);\r\n        }\r\n\r\n        // Main Y-Axis (for candlesticks)\r\n        yAxis.push({\r\n            position: 'right',\r\n            scale: true,\r\n            min: mainYAxisMin,\r\n            max: mainYAxisMax,\r\n            gridIndex: 0,\r\n            splitLine: {\r\n                show: !isMainCollapsed,\r\n                lineStyle: { color: '#334155', opacity: 0.5 },\r\n            },\r\n            axisLine: { show: !isMainCollapsed, lineStyle: { color: '#334155' } },\r\n            axisLabel: {\r\n                show: !isMainCollapsed,\r\n                color: '#94a3b8',\r\n                fontFamily: options.fontFamily || 'sans-serif',\r\n                formatter: (value: number) => {\r\n                    if (options.yAxisLabelFormatter) {\r\n                        return options.yAxisLabelFormatter(value);\r\n                    }\r\n                    const decimals = options.yAxisDecimalPlaces !== undefined ? options.yAxisDecimalPlaces : 2;\r\n                    if (typeof value === 'number') {\r\n                        return value.toFixed(decimals);\r\n                    }\r\n                    return String(value);\r\n                },\r\n            },\r\n        });\r\n\r\n        // Create separate Y-axes for overlay plots that are incompatible with price range\r\n        // Analyze each PLOT separately, not entire indicators\r\n        let nextYAxisIndex = 1;\r\n\r\n        // Calculate price range if market data is available\r\n        let priceMin = -Infinity;\r\n        let priceMax = Infinity;\r\n        if (marketData && marketData.length > 0) {\r\n            priceMin = Math.min(...marketData.map((d) => d.low));\r\n            priceMax = Math.max(...marketData.map((d) => d.high));\r\n        }\r\n\r\n        // Map to store plot-specific Y-axis assignments (key: \"indicatorId::plotName\")\r\n        const overlayYAxisMap: Map<string, number> = new Map();\r\n\r\n        indicators.forEach((indicator, id) => {\r\n            if (indicator.paneIndex === 0 && !indicator.collapsed) {\r\n                // This is an overlay on the main pane\r\n                // Analyze EACH PLOT separately\r\n\r\n                if (marketData && marketData.length > 0) {\r\n                    Object.entries(indicator.plots).forEach(([plotName, plot]) => {\r\n                        const plotKey = `${id}::${plotName}`;\r\n\r\n                        // Skip visual-only plot types that should never affect Y-axis scaling\r\n                        // EXCEPTION: shapes with abovebar/belowbar must stay on main Y-axis\r\n                        const visualOnlyStyles = ['background', 'barcolor', 'char'];\r\n\r\n                        // Check if this is a shape with price-relative positioning\r\n                        const isShapeWithPriceLocation =\r\n                            plot.options.style === 'shape' && (plot.options.location === 'abovebar' || plot.options.location === 'belowbar');\r\n\r\n                        if (visualOnlyStyles.includes(plot.options.style)) {\r\n                            // Assign these to a separate Y-axis so they don't affect price scale\r\n                            if (!overlayYAxisMap.has(plotKey)) {\r\n                                overlayYAxisMap.set(plotKey, nextYAxisIndex);\r\n                                nextYAxisIndex++;\r\n                            }\r\n                            return; // Skip further processing for this plot\r\n                        }\r\n\r\n                        // If it's a shape but NOT with price-relative positioning, treat as visual-only\r\n                        if (plot.options.style === 'shape' && !isShapeWithPriceLocation) {\r\n                            if (!overlayYAxisMap.has(plotKey)) {\r\n                                overlayYAxisMap.set(plotKey, nextYAxisIndex);\r\n                                nextYAxisIndex++;\r\n                            }\r\n                            return;\r\n                        }\r\n\r\n                        const values: number[] = [];\r\n\r\n                        // Extract values for this specific plot\r\n                        if (plot.data) {\r\n                            Object.values(plot.data).forEach((value) => {\r\n                                if (typeof value === 'number' && !isNaN(value) && isFinite(value)) {\r\n                                    values.push(value);\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                        if (values.length > 0) {\r\n                            const plotMin = Math.min(...values);\r\n                            const plotMax = Math.max(...values);\r\n                            const plotRange = plotMax - plotMin;\r\n                            const priceRange = priceMax - priceMin;\r\n\r\n                            // Check if this plot's range is compatible with price range\r\n                            // Compatible = within price bounds with similar magnitude\r\n                            const isWithinBounds = plotMin >= priceMin * 0.5 && plotMax <= priceMax * 1.5;\r\n                            const hasSimilarMagnitude = plotRange > priceRange * 0.01; // At least 1% of price range\r\n\r\n                            const isCompatible = isWithinBounds && hasSimilarMagnitude;\r\n\r\n                            if (!isCompatible) {\r\n                                // This plot needs its own Y-axis - check if we already assigned one\r\n                                if (!overlayYAxisMap.has(plotKey)) {\r\n                                    overlayYAxisMap.set(plotKey, nextYAxisIndex);\r\n                                    nextYAxisIndex++;\r\n                                }\r\n                            }\r\n                            // Compatible plots stay on yAxisIndex: 0 (not added to map)\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        // Create Y-axes for incompatible plots\r\n        // nextYAxisIndex already incremented in the loop above, so we know how many axes we need\r\n        const numOverlayAxes = overlayYAxisMap.size > 0 ? nextYAxisIndex - 1 : 0;\r\n        for (let i = 0; i < numOverlayAxes; i++) {\r\n            yAxis.push({\r\n                position: 'left',\r\n                scale: true,\r\n                min: createMinFunction(yAxisPaddingPercent),\r\n                max: createMaxFunction(yAxisPaddingPercent),\r\n                gridIndex: 0,\r\n                show: false, // Hide the axis visual elements\r\n                splitLine: { show: false },\r\n                axisLine: { show: false },\r\n                axisLabel: { show: false },\r\n            });\r\n        }\r\n\r\n        // Separate Panes Y-Axes (start after overlay axes)\r\n        const separatePaneYAxisOffset = nextYAxisIndex;\r\n        paneConfigs.forEach((pane, i) => {\r\n            yAxis.push({\r\n                position: 'right',\r\n                scale: true,\r\n                min: createMinFunction(yAxisPaddingPercent),\r\n                max: createMaxFunction(yAxisPaddingPercent),\r\n                gridIndex: i + 1,\r\n                splitLine: {\r\n                    show: !pane.isCollapsed,\r\n                    lineStyle: { color: '#334155', opacity: 0.3 },\r\n                },\r\n                axisLabel: {\r\n                    show: !pane.isCollapsed,\r\n                    color: '#94a3b8',\r\n                    fontFamily: options.fontFamily || 'sans-serif',\r\n                    fontSize: 10,\r\n                    formatter: (value: number) => {\r\n                        if (options.yAxisLabelFormatter) {\r\n                            return options.yAxisLabelFormatter(value);\r\n                        }\r\n                        const decimals = options.yAxisDecimalPlaces !== undefined ? options.yAxisDecimalPlaces : 2;\r\n                        if (typeof value === 'number') {\r\n                            return value.toFixed(decimals);\r\n                        }\r\n                        return String(value);\r\n                    },\r\n                },\r\n                axisLine: { show: !pane.isCollapsed, lineStyle: { color: '#334155' } },\r\n            });\r\n        });\r\n\r\n        // --- Generate DataZoom ---\r\n        const dataZoom: any[] = [];\r\n        if (dzVisible) {\r\n            // Add 'inside' zoom (pan/drag) only if zoomOnTouch is enabled (default true)\r\n            const zoomOnTouch = options.dataZoom?.zoomOnTouch ?? true;\r\n            if (zoomOnTouch) {\r\n                dataZoom.push({\r\n                    type: 'inside',\r\n                    xAxisIndex: allXAxisIndices,\r\n                    start: dzStart,\r\n                    end: dzEnd,\r\n                });\r\n            }\r\n\r\n            if (dzPosition === 'top') {\r\n                dataZoom.push({\r\n                    type: 'slider',\r\n                    xAxisIndex: allXAxisIndices,\r\n                    top: '1%',\r\n                    height: dzHeight + '%',\r\n                    start: dzStart,\r\n                    end: dzEnd,\r\n                    borderColor: '#334155',\r\n                    textStyle: { color: '#cbd5e1' },\r\n                    brushSelect: false,\r\n                });\r\n            } else {\r\n                dataZoom.push({\r\n                    type: 'slider',\r\n                    xAxisIndex: allXAxisIndices,\r\n                    bottom: '1%',\r\n                    height: dzHeight + '%',\r\n                    start: dzStart,\r\n                    end: dzEnd,\r\n                    borderColor: '#334155',\r\n                    textStyle: { color: '#cbd5e1' },\r\n                    brushSelect: false,\r\n                });\r\n            }\r\n        }\r\n\r\n        return {\r\n            grid,\r\n            xAxis,\r\n            yAxis,\r\n            dataZoom,\r\n            paneLayout: paneConfigs,\r\n            mainPaneHeight: mainHeightVal,\r\n            mainPaneTop,\r\n            pixelToPercent,\r\n            overlayYAxisMap,\r\n            separatePaneYAxisOffset,\r\n        };\r\n    }\r\n\r\n    private static calculateMaximized(\r\n        containerHeight: number,\r\n        options: QFChartOptions,\r\n        targetPaneIndex: number // 0 for main, 1+ for indicators\r\n    ): LayoutResult {\r\n        return {\r\n            grid: [],\r\n            xAxis: [],\r\n            yAxis: [],\r\n            dataZoom: [],\r\n            paneLayout: [],\r\n            mainPaneHeight: 0,\r\n            mainPaneTop: 0,\r\n            pixelToPercent: 0,\r\n        } as any;\r\n    }\r\n}\r\n","const imageCache = new Map<string, string>();\r\n\r\nexport function textToBase64Image(\r\n  text: string,\r\n  color: string = \"#00da3c\",\r\n  fontSize: string = \"64px\"\r\n): string {\r\n  if (typeof document === \"undefined\") return \"\";\r\n\r\n  const cacheKey = `${text}-${color}-${fontSize}`;\r\n  if (imageCache.has(cacheKey)) {\r\n    return imageCache.get(cacheKey)!;\r\n  }\r\n\r\n  const canvas = document.createElement(\"canvas\");\r\n  const ctx = canvas.getContext(\"2d\");\r\n  canvas.width = 32;\r\n  canvas.height = 32;\r\n\r\n  if (ctx) {\r\n    ctx.font = \"bold \" + fontSize + \" Arial\";\r\n    ctx.fillStyle = color;\r\n    ctx.textAlign = \"center\";\r\n    ctx.textBaseline = \"middle\";\r\n    ctx.fillText(text, 16, 16);\r\n    const dataUrl = canvas.toDataURL(\"image/png\");\r\n    imageCache.set(cacheKey, dataUrl);\r\n    return dataUrl;\r\n  }\r\n  return \"\";\r\n}\r\n","import { OHLCV, Indicator as IndicatorType, QFChartOptions, IndicatorPlot, IndicatorStyle } from '../types';\nimport { PaneConfiguration } from './LayoutManager';\nimport { textToBase64Image } from '../Utils';\n\nexport class SeriesBuilder {\n    private static readonly DEFAULT_COLOR = '#2962ff';\n\n    /**\n     * Parse color string and extract opacity\n     * Supports: hex (#RRGGBB), named colors (green, red), rgba(r,g,b,a), rgb(r,g,b)\n     */\n    private static parseColor(colorStr: string): { color: string; opacity: number } {\n        if (!colorStr) {\n            return { color: '#888888', opacity: 0.2 };\n        }\n\n        // Check for rgba format\n        const rgbaMatch = colorStr.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*([\\d.]+))?\\)/);\n        if (rgbaMatch) {\n            const r = rgbaMatch[1];\n            const g = rgbaMatch[2];\n            const b = rgbaMatch[3];\n            const a = rgbaMatch[4] ? parseFloat(rgbaMatch[4]) : 1;\n\n            // Return rgb color and separate opacity\n            return {\n                color: `rgb(${r},${g},${b})`,\n                opacity: a,\n            };\n        }\n\n        // For hex or named colors, default opacity to 0.3 for fill areas\n        return {\n            color: colorStr,\n            opacity: 0.3,\n        };\n    }\n\n    public static buildCandlestickSeries(marketData: OHLCV[], options: QFChartOptions, totalLength?: number): any {\n        const upColor = options.upColor || '#00da3c';\n        const downColor = options.downColor || '#ec0000';\n\n        const data = marketData.map((d) => [d.open, d.close, d.low, d.high]);\n\n        // Pad with nulls if totalLength is provided and greater than current data length\n        if (totalLength && totalLength > data.length) {\n            const padding = totalLength - data.length;\n            for (let i = 0; i < padding; i++) {\n                data.push(null as any);\n            }\n        }\n\n        // Build markLine for last price if enabled\n        let markLine = undefined;\n        if (options.lastPriceLine?.visible !== false && marketData.length > 0) {\n            const lastBar = marketData[marketData.length - 1];\n            const lastClose = lastBar.close;\n            const isUp = lastBar.close >= lastBar.open;\n            // Use configured color, or dynamic color based on candle direction\n            const lineColor = options.lastPriceLine?.color || (isUp ? upColor : downColor);\n            let lineStyleType = options.lastPriceLine?.lineStyle || 'dashed';\n\n            if (lineStyleType.startsWith('linestyle_')) {\n                lineStyleType = lineStyleType.replace('linestyle_', '') as any;\n            }\n            markLine = {\n                symbol: ['none', 'none'],\n                data: [\n                    {\n                        yAxis: lastClose,\n                        label: {\n                            show: true,\n                            position: 'end', // Right side\n                            formatter: (params: any) => {\n                                // Respect Y-axis formatting options\n                                if (options.yAxisLabelFormatter) {\n                                    return options.yAxisLabelFormatter(params.value);\n                                }\n                                const decimals = options.yAxisDecimalPlaces !== undefined ? options.yAxisDecimalPlaces : 2;\n                                return typeof params.value === 'number' ? params.value.toFixed(decimals) : params.value;\n                            },\n                            color: '#fff',\n                            backgroundColor: lineColor,\n                            padding: [2, 4],\n                            borderRadius: 2,\n                            fontSize: 11,\n                            fontWeight: 'bold',\n                        },\n                        lineStyle: {\n                            color: lineColor,\n                            type: lineStyleType,\n                            width: 1,\n                            opacity: 0.8,\n                        },\n                    },\n                ],\n                animation: false,\n                silent: true, // Disable interaction\n            };\n        }\n\n        return {\n            type: 'candlestick',\n            name: options.title || 'Market',\n            data: data,\n            itemStyle: {\n                color: upColor,\n                color0: downColor,\n                borderColor: upColor,\n                borderColor0: downColor,\n            },\n            markLine: markLine,\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            z: 5,\n        };\n    }\n\n    private static getShapeSymbol(shape: string): string {\n        // SVG Paths need to be:\n        // 1. Valid SVG path data strings\n        // 2. Ideally centered around the origin or a standard box (e.g., 0 0 24 24)\n        // 3. ECharts path:// format expects just the path data usually, but complex shapes might need 'image://' or better paths.\n        // For simple shapes, standard ECharts symbols or simple paths work.\n\n        switch (shape) {\n            case 'arrowdown':\n                // Blocky arrow down\n                return 'path://M12 24l-12-12h8v-12h8v12h8z';\n\n            case 'arrowup':\n                // Blocky arrow up\n                return 'path://M12 0l12 12h-8v12h-8v-12h-8z';\n\n            case 'circle':\n                return 'circle';\n\n            case 'cross':\n                // Plus sign (+)\n                return 'path://M11 2h2v9h9v2h-9v9h-2v-9h-9v-2h9z';\n\n            case 'diamond':\n                return 'diamond'; // Built-in\n\n            case 'flag':\n                // Flag on a pole\n                return 'path://M6 2v20h2v-8h12l-2-6 2-6h-12z';\n\n            case 'labeldown':\n                // Bubble pointing down: Rounded rect with a triangle at bottom\n                return 'path://M4 2h16a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-6l-2 4l-2 -4h-6a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2z';\n\n            case 'labelup':\n                // Bubble pointing up: Rounded rect with triangle at top\n                return 'path://M12 2l2 4h6a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-16a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h6z';\n\n            case 'square':\n                return 'rect';\n\n            case 'triangledown':\n                // Pointing down\n                return 'path://M12 21l-10-18h20z';\n\n            case 'triangleup':\n                // Pointing up\n                return 'triangle'; // Built-in is pointing up\n\n            case 'xcross':\n                // 'X' shape\n                return 'path://M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z';\n\n            default:\n                return 'circle';\n        }\n    }\n\n    private static getShapeRotation(shape: string): number {\n        // With custom paths defined above, we might not need rotation unless we reuse shapes.\n        // Built-in triangle is UP.\n        return 0;\n    }\n\n    private static getShapeSize(size: string, width?: number, height?: number): number | number[] {\n        // If both width and height are specified, use them directly\n        if (width !== undefined && height !== undefined) {\n            return [width, height];\n        }\n\n        // Base size from the size parameter\n        let baseSize: number;\n        switch (size) {\n            case 'tiny':\n                baseSize = 8;\n                break;\n            case 'small':\n                baseSize = 12;\n                break;\n            case 'normal':\n            case 'auto':\n                baseSize = 16;\n                break;\n            case 'large':\n                baseSize = 24;\n                break;\n            case 'huge':\n                baseSize = 32;\n                break;\n            default:\n                baseSize = 16;\n        }\n\n        // If only width is specified, preserve aspect ratio (assume square default)\n        if (width !== undefined) {\n            return [width, width];\n        }\n\n        // If only height is specified, preserve aspect ratio (assume square default)\n        if (height !== undefined) {\n            return [height, height];\n        }\n\n        // Default uniform size\n        return baseSize;\n    }\n\n    // Helper to determine label position and distance relative to shape BASED ON LOCATION\n    private static getLabelConfig(shape: string, location: string): { position: string; distance: number } {\n        // Text position should be determined by location, not shape direction\n\n        switch (location) {\n            case 'abovebar':\n                // Shape is above the candle, text should be above the shape\n                return { position: 'top', distance: 5 };\n\n            case 'belowbar':\n                // Shape is below the candle, text should be below the shape\n                return { position: 'bottom', distance: 5 };\n\n            case 'top':\n                // Shape at top of chart, text below it\n                return { position: 'bottom', distance: 5 };\n\n            case 'bottom':\n                // Shape at bottom of chart, text above it\n                return { position: 'top', distance: 5 };\n\n            case 'absolute':\n            default:\n                // For labelup/down, text is INSIDE the shape\n                if (shape === 'labelup' || shape === 'labeldown') {\n                    return { position: 'inside', distance: 0 };\n                }\n                // For other shapes, text above by default\n                return { position: 'top', distance: 5 };\n        }\n    }\n\n    public static buildIndicatorSeries(\n        indicators: Map<string, IndicatorType>,\n        timeToIndex: Map<number, number>,\n        paneLayout: PaneConfiguration[],\n        totalDataLength: number,\n        dataIndexOffset: number = 0,\n        candlestickData?: OHLCV[], // Add candlestick data to access High/Low for positioning\n        overlayYAxisMap?: Map<string, number>, // Map of overlay indicator IDs to their Y-axis indices\n        separatePaneYAxisOffset: number = 1 // Offset for separate pane Y-axes (accounts for overlay axes)\n    ): { series: any[]; barColors: (string | null)[] } {\n        const series: any[] = [];\n        const barColors: (string | null)[] = new Array(totalDataLength).fill(null);\n\n        // Store plot data arrays for fill plots to reference\n        const plotDataArrays = new Map<string, number[]>();\n\n        indicators.forEach((indicator, id) => {\n            if (indicator.collapsed) return; // Skip if collapsed\n\n            // Sort plots so that 'fill' plots are processed last\n            // This ensures that the plots they reference (plot1, plot2) have already been processed and their data stored\n            const sortedPlots = Object.keys(indicator.plots).sort((a, b) => {\n                const plotA = indicator.plots[a];\n                const plotB = indicator.plots[b];\n                const isFillA = plotA.options.style === 'fill';\n                const isFillB = plotB.options.style === 'fill';\n                if (isFillA && !isFillB) return 1;\n                if (!isFillA && isFillB) return -1;\n                return 0;\n            });\n\n            sortedPlots.forEach((plotName) => {\n                const plot = indicator.plots[plotName];\n                const seriesName = `${id}::${plotName}`;\n\n                // Find axis index for THIS SPECIFIC PLOT\n                let xAxisIndex = 0;\n                let yAxisIndex = 0;\n\n                // Check plot-level overlay setting (overrides indicator-level setting)\n                const plotOverlay = plot.options.overlay;\n                const isPlotOverlay = plotOverlay !== undefined ? plotOverlay : indicator.paneIndex === 0;\n\n                if (isPlotOverlay) {\n                    // Plot should be on main chart (overlay)\n                    xAxisIndex = 0;\n                    if (overlayYAxisMap && overlayYAxisMap.has(seriesName)) {\n                        // This specific plot has its own Y-axis (incompatible with price range)\n                        yAxisIndex = overlayYAxisMap.get(seriesName)!;\n                    } else {\n                        // Shares main Y-axis with candlesticks\n                        yAxisIndex = 0;\n                    }\n                } else {\n                    // Plot should be in indicator's separate pane\n                    const confIndex = paneLayout.findIndex((p) => p.index === indicator.paneIndex);\n                    if (confIndex !== -1) {\n                        xAxisIndex = confIndex + 1;\n                        yAxisIndex = separatePaneYAxisOffset + confIndex;\n                    }\n                }\n\n                // Prepare data arrays\n                // For 'fill' style, we don't use plot.data directly in the same way, but we initialize generic arrays\n                const dataArray = new Array(totalDataLength).fill(null);\n                const colorArray = new Array(totalDataLength).fill(null);\n                const optionsArray = new Array(totalDataLength).fill(null); // Store per-point options\n\n                plot.data?.forEach((point) => {\n                    const index = timeToIndex.get(point.time);\n                    if (index !== undefined) {\n                        const plotOffset = point.options?.offset ?? plot.options.offset ?? 0;\n                        const offsetIndex = index + dataIndexOffset + plotOffset;\n\n                        if (offsetIndex >= 0 && offsetIndex < totalDataLength) {\n                            let value = point.value;\n                            const pointColor = point.options?.color;\n\n                            // TradingView compatibility: if color is 'na' (NaN, null, or \"na\"), break the line\n                            const isNaColor =\n                                pointColor === null ||\n                                pointColor === 'na' ||\n                                pointColor === 'NaN' ||\n                                (typeof pointColor === 'number' && isNaN(pointColor));\n\n                            if (isNaColor) {\n                                value = null;\n                            }\n\n                            dataArray[offsetIndex] = value;\n                            colorArray[offsetIndex] = pointColor || plot.options.color || SeriesBuilder.DEFAULT_COLOR;\n                            optionsArray[offsetIndex] = point.options || {};\n                        }\n                    }\n                });\n\n                // Store data array for fill plots to reference\n                // Only store for non-fill plots as fill plots don't produce data to be referenced by other fills (usually)\n                plotDataArrays.set(`${id}::${plotName}`, dataArray);\n\n                if (plot.options?.style?.startsWith('style_')) {\n                    plot.options.style = plot.options.style.replace('style_', '') as IndicatorStyle;\n                }\n                switch (plot.options.style) {\n                    case 'histogram':\n                    case 'columns':\n                        series.push({\n                            name: seriesName,\n                            type: 'bar',\n                            xAxisIndex: xAxisIndex,\n                            yAxisIndex: yAxisIndex,\n                            data: dataArray.map((val, i) => ({\n                                value: val,\n                                itemStyle: colorArray[i] ? { color: colorArray[i] } : undefined,\n                            })),\n                            itemStyle: { color: plot.options.color || SeriesBuilder.DEFAULT_COLOR },\n                        });\n                        break;\n\n                    case 'circles':\n                    case 'cross':\n                        // Scatter\n                        const scatterData = dataArray\n                            .map((val, i) => {\n                                if (val === null) return null;\n                                const pointColor = colorArray[i] || plot.options.color || SeriesBuilder.DEFAULT_COLOR;\n                                const item: any = {\n                                    value: [i, val],\n                                    itemStyle: { color: pointColor },\n                                };\n\n                                if (plot.options.style === 'cross') {\n                                    item.symbol = `image://${textToBase64Image('+', pointColor, '24px')}`;\n                                    item.symbolSize = 16;\n                                } else {\n                                    item.symbol = 'circle';\n                                    item.symbolSize = 6;\n                                }\n                                return item;\n                            })\n                            .filter((item) => item !== null);\n\n                        series.push({\n                            name: seriesName,\n                            type: 'scatter',\n                            xAxisIndex: xAxisIndex,\n                            yAxisIndex: yAxisIndex,\n                            data: scatterData,\n                        });\n                        break;\n\n                    case 'bar':\n                    case 'candle':\n                        // OHLC Bar/Candle rendering\n                        const ohlcData = dataArray\n                            .map((val, i) => {\n                                if (val === null || !Array.isArray(val) || val.length !== 4) return null;\n\n                                const [open, high, low, close] = val;\n                                const pointOpts = optionsArray[i] || {};\n                                const color = pointOpts.color || colorArray[i] || plot.options.color || SeriesBuilder.DEFAULT_COLOR;\n                                const wickColor = pointOpts.wickcolor || plot.options.wickcolor || color;\n                                const borderColor = pointOpts.bordercolor || plot.options.bordercolor || wickColor;\n\n                                // Store colors in value array at positions 5, 6, and 7 for access in renderItem\n                                return [i, open, close, low, high, color, wickColor, borderColor];\n                            })\n                            .filter((item) => item !== null);\n\n                        series.push({\n                            name: seriesName,\n                            type: 'custom',\n                            xAxisIndex: xAxisIndex,\n                            yAxisIndex: yAxisIndex,\n                            renderItem: (params: any, api: any) => {\n                                const xValue = api.value(0);\n                                const openValue = api.value(1);\n                                const closeValue = api.value(2);\n                                const lowValue = api.value(3);\n                                const highValue = api.value(4);\n                                const color = api.value(5);\n                                const wickColor = api.value(6);\n                                const borderColor = api.value(7);\n\n                                if (isNaN(openValue) || isNaN(closeValue) || isNaN(lowValue) || isNaN(highValue)) {\n                                    return null;\n                                }\n\n                                const xPos = api.coord([xValue, 0])[0];\n                                const openPos = api.coord([xValue, openValue])[1];\n                                const closePos = api.coord([xValue, closeValue])[1];\n                                const lowPos = api.coord([xValue, lowValue])[1];\n                                const highPos = api.coord([xValue, highValue])[1];\n\n                                const barWidth = api.size([1, 0])[0] * 0.6;\n\n                                if (plot.options.style === 'candle') {\n                                    // Classic candlestick rendering\n                                    const bodyTop = Math.min(openPos, closePos);\n                                    const bodyBottom = Math.max(openPos, closePos);\n                                    const bodyHeight = Math.abs(closePos - openPos);\n\n                                    return {\n                                        type: 'group',\n                                        children: [\n                                            // Upper wick\n                                            {\n                                                type: 'line',\n                                                shape: {\n                                                    x1: xPos,\n                                                    y1: highPos,\n                                                    x2: xPos,\n                                                    y2: bodyTop,\n                                                },\n                                                style: {\n                                                    stroke: wickColor,\n                                                    lineWidth: 1,\n                                                },\n                                            },\n                                            // Lower wick\n                                            {\n                                                type: 'line',\n                                                shape: {\n                                                    x1: xPos,\n                                                    y1: bodyBottom,\n                                                    x2: xPos,\n                                                    y2: lowPos,\n                                                },\n                                                style: {\n                                                    stroke: wickColor,\n                                                    lineWidth: 1,\n                                                },\n                                            },\n                                            // Body\n                                            {\n                                                type: 'rect',\n                                                shape: {\n                                                    x: xPos - barWidth / 2,\n                                                    y: bodyTop,\n                                                    width: barWidth,\n                                                    height: bodyHeight || 1, // Minimum height for doji\n                                                },\n                                                style: {\n                                                    fill: color,\n                                                    stroke: borderColor,\n                                                    lineWidth: 1,\n                                                },\n                                            },\n                                        ],\n                                    };\n                                } else {\n                                    // Bar style (OHLC bar)\n                                    const tickWidth = barWidth * 0.5;\n\n                                    return {\n                                        type: 'group',\n                                        children: [\n                                            // Vertical line (low to high)\n                                            {\n                                                type: 'line',\n                                                shape: {\n                                                    x1: xPos,\n                                                    y1: lowPos,\n                                                    x2: xPos,\n                                                    y2: highPos,\n                                                },\n                                                style: {\n                                                    stroke: color,\n                                                    lineWidth: 1,\n                                                },\n                                            },\n                                            // Open tick (left)\n                                            {\n                                                type: 'line',\n                                                shape: {\n                                                    x1: xPos - tickWidth,\n                                                    y1: openPos,\n                                                    x2: xPos,\n                                                    y2: openPos,\n                                                },\n                                                style: {\n                                                    stroke: color,\n                                                    lineWidth: 1,\n                                                },\n                                            },\n                                            // Close tick (right)\n                                            {\n                                                type: 'line',\n                                                shape: {\n                                                    x1: xPos,\n                                                    y1: closePos,\n                                                    x2: xPos + tickWidth,\n                                                    y2: closePos,\n                                                },\n                                                style: {\n                                                    stroke: color,\n                                                    lineWidth: 1,\n                                                },\n                                            },\n                                        ],\n                                    };\n                                }\n                            },\n                            data: ohlcData,\n                        });\n                        break;\n\n                    case 'shape':\n                        const shapeData = dataArray\n                            .map((val, i) => {\n                                // Merge global options with per-point options to get location first\n                                const pointOpts = optionsArray[i] || {};\n                                const globalOpts = plot.options;\n                                const location = pointOpts.location || globalOpts.location || 'absolute';\n\n                                // For location=\"absolute\", always draw the shape (ignore value)\n                                // For other locations, only draw if value is truthy (TradingView behavior)\n                                if (location !== 'absolute' && !val) {\n                                    return null;\n                                }\n\n                                // If we get here and val is null/undefined, it means location is absolute\n                                // In that case, we still need a valid value for positioning\n                                // Use the value if it exists, otherwise we'd need a fallback\n                                // But in TradingView, absolute location still expects a value for Y position\n                                if (val === null || val === undefined) {\n                                    return null; // Can't plot without a Y coordinate\n                                }\n\n                                const color = pointOpts.color || globalOpts.color || SeriesBuilder.DEFAULT_COLOR;\n                                const shape = pointOpts.shape || globalOpts.shape || 'circle';\n                                const size = pointOpts.size || globalOpts.size || 'normal';\n                                const text = pointOpts.text || globalOpts.text;\n                                const textColor = pointOpts.textcolor || globalOpts.textcolor || 'white';\n\n                                // NEW: Get width and height\n                                const width = pointOpts.width || globalOpts.width;\n                                const height = pointOpts.height || globalOpts.height;\n\n                                // Debug logging (remove after testing)\n                                // if (width !== undefined || height !== undefined) {\n                                //     console.log('[Shape Debug]', { shape, width, height, pointOpts, globalOpts });\n                                // }\n\n                                // Positioning based on location\n                                let yValue = val; // Default to absolute value\n                                let symbolOffset: (string | number)[] = [0, 0];\n\n                                if (location === 'abovebar') {\n                                    // Shape above the candle\n                                    if (candlestickData && candlestickData[i]) {\n                                        yValue = candlestickData[i].high;\n                                    }\n                                    symbolOffset = [0, '-150%']; // Shift up\n                                } else if (location === 'belowbar') {\n                                    // Shape below the candle\n                                    if (candlestickData && candlestickData[i]) {\n                                        yValue = candlestickData[i].low;\n                                    }\n                                    symbolOffset = [0, '150%']; // Shift down\n                                } else if (location === 'top') {\n                                    // Shape at top of chart - we need to use a very high value\n                                    // This would require knowing the y-axis max, which we don't have here easily\n                                    // For now, use a placeholder approach - might need to calculate from data\n                                    // Or we can use a percentage of the viewport? ECharts doesn't support that directly in scatter.\n                                    // Best approach: use a large multiplier of current value or track max\n                                    // Simplified: use coordinate system max (will need enhancement)\n                                    yValue = val; // For now, keep absolute - would need axis max\n                                    symbolOffset = [0, 0];\n                                } else if (location === 'bottom') {\n                                    // Shape at bottom of chart\n                                    yValue = val; // For now, keep absolute - would need axis min\n                                    symbolOffset = [0, 0];\n                                }\n\n                                const symbol = SeriesBuilder.getShapeSymbol(shape);\n                                const symbolSize = SeriesBuilder.getShapeSize(size, width, height);\n                                const rotate = SeriesBuilder.getShapeRotation(shape);\n\n                                // Debug logging (remove after testing)\n                                // if (width !== undefined || height !== undefined) {\n                                //     console.log('[Shape Size Debug]', { symbolSize, width, height, size });\n                                // }\n\n                                // Special handling for labelup/down sizing - they contain text so they should be larger\n                                let finalSize: number | number[] = symbolSize;\n                                if (shape.includes('label')) {\n                                    // If custom size, scale it up for labels\n                                    if (Array.isArray(symbolSize)) {\n                                        finalSize = [symbolSize[0] * 2.5, symbolSize[1] * 2.5];\n                                    } else {\n                                        finalSize = symbolSize * 2.5;\n                                    }\n                                }\n\n                                // Get label configuration based on location\n                                const labelConfig = SeriesBuilder.getLabelConfig(shape, location);\n\n                                const item: any = {\n                                    value: [i, yValue],\n                                    symbol: symbol,\n                                    symbolSize: finalSize,\n                                    symbolRotate: rotate,\n                                    symbolOffset: symbolOffset,\n                                    itemStyle: {\n                                        color: color,\n                                    },\n                                    label: {\n                                        show: !!text,\n                                        position: labelConfig.position,\n                                        distance: labelConfig.distance,\n                                        formatter: text,\n                                        color: textColor,\n                                        fontSize: 10,\n                                        fontWeight: 'bold',\n                                    },\n                                };\n\n                                return item;\n                            })\n                            .filter((item) => item !== null);\n\n                        series.push({\n                            name: seriesName,\n                            type: 'scatter',\n                            xAxisIndex: xAxisIndex,\n                            yAxisIndex: yAxisIndex,\n                            data: shapeData,\n                        });\n                        break;\n\n                    case 'background':\n                        series.push({\n                            name: seriesName,\n                            type: 'custom',\n                            xAxisIndex: xAxisIndex,\n                            yAxisIndex: yAxisIndex,\n                            z: -10,\n                            renderItem: (params: any, api: any) => {\n                                const xVal = api.value(0);\n                                if (isNaN(xVal)) return;\n\n                                const start = api.coord([xVal, 0]);\n                                const size = api.size([1, 0]);\n                                const width = size[0];\n                                const sys = params.coordSys;\n                                const x = start[0] - width / 2;\n                                const barColor = colorArray[params.dataIndex];\n                                const val = api.value(1);\n\n                                if (!barColor || val === null || val === undefined || isNaN(val)) return;\n\n                                return {\n                                    type: 'rect',\n                                    shape: {\n                                        x: x,\n                                        y: sys.y,\n                                        width: width,\n                                        height: sys.height,\n                                    },\n                                    style: {\n                                        fill: barColor,\n                                        opacity: 0.3,\n                                    },\n                                    silent: true,\n                                };\n                            },\n                            data: dataArray.map((val, i) => [i, val]),\n                        });\n                        break;\n\n                    case 'step':\n                        series.push({\n                            name: seriesName,\n                            type: 'custom',\n                            xAxisIndex: xAxisIndex,\n                            yAxisIndex: yAxisIndex,\n                            renderItem: (params: any, api: any) => {\n                                const x = api.value(0);\n                                const y = api.value(1);\n                                if (isNaN(y) || y === null) return;\n\n                                const coords = api.coord([x, y]);\n                                const width = api.size([1, 0])[0];\n\n                                return {\n                                    type: 'line',\n                                    shape: {\n                                        x1: coords[0] - width / 2,\n                                        y1: coords[1],\n                                        x2: coords[0] + width / 2,\n                                        y2: coords[1],\n                                    },\n                                    style: {\n                                        stroke: colorArray[params.dataIndex] || plot.options.color || SeriesBuilder.DEFAULT_COLOR,\n                                        lineWidth: plot.options.linewidth || 1,\n                                    },\n                                    silent: true,\n                                };\n                            },\n                            data: dataArray.map((val, i) => [i, val]),\n                        });\n                        break;\n\n                    case 'barcolor':\n                        // Apply colors to main chart candlesticks\n                        // Don't create a visual series, just store colors in barColors array\n                        plot.data?.forEach((point) => {\n                            const index = timeToIndex.get(point.time);\n                            if (index !== undefined) {\n                                const plotOffset = point.options?.offset ?? plot.options.offset ?? 0;\n                                const offsetIndex = index + dataIndexOffset + plotOffset;\n\n                                if (offsetIndex >= 0 && offsetIndex < totalDataLength) {\n                                    const pointColor = point.options?.color || plot.options.color || SeriesBuilder.DEFAULT_COLOR;\n                                    // Only apply if color is valid (not 'na')\n                                    const isNaColor =\n                                        pointColor === null ||\n                                        pointColor === 'na' ||\n                                        pointColor === 'NaN' ||\n                                        (typeof pointColor === 'number' && isNaN(pointColor));\n\n                                    if (!isNaColor && point.value !== null && point.value !== undefined) {\n                                        // Only apply color if value is defined (allow 0)\n                                        barColors[offsetIndex] = pointColor;\n                                    }\n                                }\n                            }\n                        });\n                        break;\n\n                    case 'char':\n                        // Invisible series - data only shown in tooltip/sidebar\n                        series.push({\n                            name: seriesName,\n                            type: 'scatter',\n                            xAxisIndex: xAxisIndex,\n                            yAxisIndex: yAxisIndex,\n                            symbolSize: 0, // Invisible\n                            data: dataArray.map((val, i) => ({\n                                value: [i, val],\n                                itemStyle: { opacity: 0 },\n                            })),\n                            silent: true, // No interaction\n                        });\n                        break;\n\n                    case 'fill':\n                        // Fill plots reference other plots to fill the area between them\n                        const plot1Key = plot.plot1 ? `${id}::${plot.plot1}` : null;\n                        const plot2Key = plot.plot2 ? `${id}::${plot.plot2}` : null;\n\n                        if (!plot1Key || !plot2Key) {\n                            console.warn(`Fill plot \"${plotName}\" missing plot1 or plot2 reference`);\n                            break;\n                        }\n\n                        const plot1Data = plotDataArrays.get(plot1Key);\n                        const plot2Data = plotDataArrays.get(plot2Key);\n\n                        if (!plot1Data || !plot2Data) {\n                            console.warn(`Fill plot \"${plotName}\" references non-existent plots: ${plot.plot1}, ${plot.plot2}`);\n                            break;\n                        }\n\n                        // Parse color to extract opacity\n                        const { color: fillColor, opacity: fillOpacity } = SeriesBuilder.parseColor(plot.options.color || 'rgba(128, 128, 128, 0.2)');\n\n                        // Create fill data with previous values for smooth polygon rendering\n                        const fillDataWithPrev: any[] = [];\n                        for (let i = 0; i < totalDataLength; i++) {\n                            const y1 = plot1Data[i];\n                            const y2 = plot2Data[i];\n                            const prevY1 = i > 0 ? plot1Data[i - 1] : null;\n                            const prevY2 = i > 0 ? plot2Data[i - 1] : null;\n\n                            fillDataWithPrev.push([i, y1, y2, prevY1, prevY2]);\n                        }\n\n                        // Add fill series with smooth area rendering\n                        series.push({\n                            name: seriesName,\n                            type: 'custom',\n                            xAxisIndex: xAxisIndex,\n                            yAxisIndex: yAxisIndex,\n                            z: -5, // Render behind lines but above background\n                            renderItem: (params: any, api: any) => {\n                                const index = params.dataIndex;\n\n                                // Skip first point (no previous to connect to)\n                                if (index === 0) return null;\n\n                                const y1 = api.value(1); // Current upper\n                                const y2 = api.value(2); // Current lower\n                                const prevY1 = api.value(3); // Previous upper\n                                const prevY2 = api.value(4); // Previous lower\n\n                                // Skip if any value is null/NaN\n                                if (\n                                    y1 === null ||\n                                    y2 === null ||\n                                    prevY1 === null ||\n                                    prevY2 === null ||\n                                    isNaN(y1) ||\n                                    isNaN(y2) ||\n                                    isNaN(prevY1) ||\n                                    isNaN(prevY2)\n                                ) {\n                                    return null;\n                                }\n\n                                // Get pixel coordinates for all 4 points\n                                const p1Prev = api.coord([index - 1, prevY1]); // Previous upper\n                                const p1Curr = api.coord([index, y1]); // Current upper\n                                const p2Curr = api.coord([index, y2]); // Current lower\n                                const p2Prev = api.coord([index - 1, prevY2]); // Previous lower\n\n                                // Create a smooth polygon connecting the segments\n                                return {\n                                    type: 'polygon',\n                                    shape: {\n                                        points: [\n                                            p1Prev, // Top-left\n                                            p1Curr, // Top-right\n                                            p2Curr, // Bottom-right\n                                            p2Prev, // Bottom-left\n                                        ],\n                                    },\n                                    style: {\n                                        fill: fillColor,\n                                        opacity: fillOpacity,\n                                    },\n                                    silent: true,\n                                };\n                            },\n                            data: fillDataWithPrev,\n                        });\n                        break;\n\n                    case 'line':\n                    default:\n                        series.push({\n                            name: seriesName,\n                            type: 'custom',\n                            xAxisIndex: xAxisIndex,\n                            yAxisIndex: yAxisIndex,\n                            renderItem: (params: any, api: any) => {\n                                const index = params.dataIndex;\n                                if (index === 0) return; // Need at least two points for a line segment\n\n                                const y2 = api.value(1);\n                                const y1 = api.value(2); // We'll store prevValue in the data\n\n                                if (y2 === null || isNaN(y2) || y1 === null || isNaN(y1)) return;\n\n                                const p1 = api.coord([index - 1, y1]);\n                                const p2 = api.coord([index, y2]);\n\n                                return {\n                                    type: 'line',\n                                    shape: {\n                                        x1: p1[0],\n                                        y1: p1[1],\n                                        x2: p2[0],\n                                        y2: p2[1],\n                                    },\n                                    style: {\n                                        stroke: colorArray[index] || plot.options.color || SeriesBuilder.DEFAULT_COLOR,\n                                        lineWidth: plot.options.linewidth || 1,\n                                    },\n                                    silent: true,\n                                };\n                            },\n                            // Data format: [index, value, prevValue]\n                            data: dataArray.map((val, i) => [i, val, i > 0 ? dataArray[i - 1] : null]),\n                        });\n                        break;\n                }\n            });\n        });\n\n        return { series, barColors };\n    }\n}\n","import { LayoutResult } from './LayoutManager';\r\nimport { QFChartOptions } from '../types';\r\n\r\nexport class GraphicBuilder {\r\n    public static build(\r\n        layout: LayoutResult,\r\n        options: QFChartOptions,\r\n        onToggle: (id: string, action?: 'collapse' | 'maximize' | 'fullscreen') => void,\r\n        isMainCollapsed: boolean = false,\r\n        maximizedPaneId: string | null = null\r\n    ): any[] {\r\n        const graphic: any[] = [];\r\n        const pixelToPercent = layout.pixelToPercent;\r\n        const mainPaneTop = layout.mainPaneTop;\r\n\r\n        // Main Chart Title (Only if main chart is visible or maximized)\r\n        // If maximizedPaneId is set and NOT main, main title should be hidden?\r\n        // With current LayoutManager logic, if maximizedPaneId !== main, mainPaneHeight is 0.\r\n        // We should check heights or IDs.\r\n\r\n        const showMain = !maximizedPaneId || maximizedPaneId === 'main';\r\n\r\n        if (showMain) {\r\n            const titleTopMargin = 10 * pixelToPercent;\r\n            graphic.push({\r\n                type: 'text',\r\n                left: '8.5%',\r\n                top: mainPaneTop + titleTopMargin + '%',\r\n                z: 10,\r\n                style: {\r\n                    text: options.title || 'Market',\r\n                    fill: options.titleColor || '#fff',\r\n                    font: `bold 16px ${options.fontFamily || 'sans-serif'}`,\r\n                    textVerticalAlign: 'top',\r\n                },\r\n            });\r\n\r\n            // Watermark\r\n            if (options.watermark !== false) {\r\n                const bottomY = layout.mainPaneTop + layout.mainPaneHeight;\r\n                graphic.push({\r\n                    type: 'text',\r\n                    right: '11%',\r\n                    top: bottomY - 3 + '%', // Position 5% from bottom of main chart\r\n                    z: 10,\r\n                    style: {\r\n                        text: 'QFChart',\r\n                        fill: options.fontColor || '#cbd5e1',\r\n                        font: `bold 16px sans-serif`,\r\n                        opacity: 0.1,\r\n                    },\r\n                    cursor: 'pointer',\r\n                    onclick: () => {\r\n                        window.open('https://quantforge.org', '_blank');\r\n                    },\r\n                });\r\n            }\r\n\r\n            // Main Controls Group\r\n            const controls: any[] = [];\r\n\r\n            // Collapse Button\r\n            if (options.controls?.collapse) {\r\n                controls.push({\r\n                    type: 'group',\r\n                    children: [\r\n                        {\r\n                            type: 'rect',\r\n                            shape: { width: 20, height: 20, r: 2 },\r\n                            style: { fill: '#334155', stroke: '#475569', lineWidth: 1 },\r\n                            onclick: () => onToggle('main', 'collapse'),\r\n                        },\r\n                        {\r\n                            type: 'text',\r\n                            style: {\r\n                                text: isMainCollapsed ? '+' : '',\r\n                                fill: '#cbd5e1',\r\n                                font: `bold 14px ${options.fontFamily}`,\r\n                                x: 10,\r\n                                y: 10,\r\n                                textAlign: 'center',\r\n                                textVerticalAlign: 'middle',\r\n                            },\r\n                            silent: true,\r\n                        },\r\n                    ],\r\n                });\r\n            }\r\n\r\n            // Maximize Button\r\n            if (options.controls?.maximize) {\r\n                const isMaximized = maximizedPaneId === 'main';\r\n                // Shift x position if collapse button exists\r\n                const xOffset = options.controls?.collapse ? 25 : 0;\r\n\r\n                controls.push({\r\n                    type: 'group',\r\n                    x: xOffset,\r\n                    children: [\r\n                        {\r\n                            type: 'rect',\r\n                            shape: { width: 20, height: 20, r: 2 },\r\n                            style: { fill: '#334155', stroke: '#475569', lineWidth: 1 },\r\n                            onclick: () => onToggle('main', 'maximize'),\r\n                        },\r\n                        {\r\n                            type: 'text',\r\n                            style: {\r\n                                text: isMaximized ? '' : '', // Simple chars for now\r\n                                fill: '#cbd5e1',\r\n                                font: `14px ${options.fontFamily}`,\r\n                                x: 10,\r\n                                y: 10,\r\n                                textAlign: 'center',\r\n                                textVerticalAlign: 'middle',\r\n                            },\r\n                            silent: true,\r\n                        },\r\n                    ],\r\n                });\r\n            }\r\n\r\n            // Fullscreen Button\r\n            if (options.controls?.fullscreen) {\r\n                let xOffset = 0;\r\n                if (options.controls?.collapse) xOffset += 25;\r\n                if (options.controls?.maximize) xOffset += 25;\r\n\r\n                controls.push({\r\n                    type: 'group',\r\n                    x: xOffset,\r\n                    children: [\r\n                        {\r\n                            type: 'rect',\r\n                            shape: { width: 20, height: 20, r: 2 },\r\n                            style: { fill: '#334155', stroke: '#475569', lineWidth: 1 },\r\n                            onclick: () => onToggle('main', 'fullscreen'),\r\n                        },\r\n                        {\r\n                            type: 'text',\r\n                            style: {\r\n                                text: '',\r\n                                fill: '#cbd5e1',\r\n                                font: `14px ${options.fontFamily}`,\r\n                                x: 10,\r\n                                y: 10,\r\n                                textAlign: 'center',\r\n                                textVerticalAlign: 'middle',\r\n                            },\r\n                            silent: true,\r\n                        },\r\n                    ],\r\n                });\r\n            }\r\n\r\n            if (controls.length > 0) {\r\n                graphic.push({\r\n                    type: 'group',\r\n                    right: '10.5%',\r\n                    top: mainPaneTop + '%',\r\n                    children: controls,\r\n                });\r\n            }\r\n        }\r\n\r\n        // Indicator Panes\r\n        layout.paneLayout.forEach((pane) => {\r\n            // If maximizedPaneId is set, and this is NOT the maximized pane, skip rendering its controls\r\n            if (maximizedPaneId && pane.indicatorId !== maximizedPaneId) {\r\n                return;\r\n            }\r\n\r\n            // Title\r\n            graphic.push({\r\n                type: 'text',\r\n                left: '8.5%',\r\n                top: pane.top + 10 * pixelToPercent + '%',\r\n                z: 10,\r\n                style: {\r\n                    text: pane.indicatorId || '',\r\n                    fill: pane.titleColor || '#fff',\r\n                    font: `bold 12px ${options.fontFamily || 'sans-serif'}`,\r\n                    textVerticalAlign: 'top',\r\n                },\r\n            });\r\n\r\n            // Controls\r\n            const controls: any[] = [];\r\n\r\n            // Collapse\r\n            if (pane.controls?.collapse) {\r\n                controls.push({\r\n                    type: 'group',\r\n                    children: [\r\n                        {\r\n                            type: 'rect',\r\n                            shape: { width: 20, height: 20, r: 2 },\r\n                            style: { fill: '#334155', stroke: '#475569', lineWidth: 1 },\r\n                            onclick: () => pane.indicatorId && onToggle(pane.indicatorId, 'collapse'),\r\n                        },\r\n                        {\r\n                            type: 'text',\r\n                            style: {\r\n                                text: pane.isCollapsed ? '+' : '',\r\n                                fill: '#cbd5e1',\r\n                                font: `bold 14px ${options.fontFamily}`,\r\n                                x: 10,\r\n                                y: 10,\r\n                                textAlign: 'center',\r\n                                textVerticalAlign: 'middle',\r\n                            },\r\n                            silent: true,\r\n                        },\r\n                    ],\r\n                });\r\n            }\r\n\r\n            // Maximize\r\n            if (pane.controls?.maximize) {\r\n                // Assuming we add maximize to Indicator controls\r\n                const isMaximized = maximizedPaneId === pane.indicatorId;\r\n                const xOffset = pane.controls?.collapse ? 25 : 0;\r\n\r\n                controls.push({\r\n                    type: 'group',\r\n                    x: xOffset,\r\n                    children: [\r\n                        {\r\n                            type: 'rect',\r\n                            shape: { width: 20, height: 20, r: 2 },\r\n                            style: { fill: '#334155', stroke: '#475569', lineWidth: 1 },\r\n                            onclick: () => pane.indicatorId && onToggle(pane.indicatorId, 'maximize'),\r\n                        },\r\n                        {\r\n                            type: 'text',\r\n                            style: {\r\n                                text: isMaximized ? '' : '',\r\n                                fill: '#cbd5e1',\r\n                                font: `14px ${options.fontFamily}`,\r\n                                x: 10,\r\n                                y: 10,\r\n                                textAlign: 'center',\r\n                                textVerticalAlign: 'middle',\r\n                            },\r\n                            silent: true,\r\n                        },\r\n                    ],\r\n                });\r\n            }\r\n\r\n            if (controls.length > 0) {\r\n                graphic.push({\r\n                    type: 'group',\r\n                    right: '10.5%',\r\n                    top: pane.top + '%',\r\n                    children: controls,\r\n                });\r\n            }\r\n        });\r\n\r\n        return graphic;\r\n    }\r\n}\r\n","import { QFChartOptions } from \"../types\";\r\n\r\nexport class TooltipFormatter {\r\n  public static format(params: any[], options: QFChartOptions): string {\r\n    if (!params || params.length === 0) return \"\";\r\n\r\n    const marketName = options.title || \"Market\";\r\n    const upColor = options.upColor || \"#00da3c\";\r\n    const downColor = options.downColor || \"#ec0000\";\r\n    const fontFamily = options.fontFamily || \"sans-serif\";\r\n\r\n    // 1. Header: Date/Time (from the first param)\r\n    const date = params[0].axisValue;\r\n    let html = `<div style=\"font-weight: bold; margin-bottom: 5px; color: #cbd5e1; font-family: ${fontFamily};\">${date}</div>`;\r\n\r\n    // 2. Separate Market Data (Candlestick) from Indicators\r\n    const marketSeries = params.find(\r\n      (p: any) => p.seriesType === \"candlestick\"\r\n    );\r\n    const indicatorParams = params.filter(\r\n      (p: any) => p.seriesType !== \"candlestick\"\r\n    );\r\n\r\n    // 3. Market Data Section\r\n    if (marketSeries) {\r\n      const [_, open, close, low, high] = marketSeries.value;\r\n      const color = close >= open ? upColor : downColor;\r\n\r\n      html += `\r\n            <div style=\"margin-bottom: 8px; font-family: ${fontFamily};\">\r\n                <div style=\"display:flex; justify-content:space-between; color:${color}; font-weight:bold;\">\r\n                    <span>${marketName}</span>\r\n                </div>\r\n                <div style=\"display: grid; grid-template-columns: auto auto; gap: 2px 15px; font-size: 0.9em; color: #cbd5e1;\">\r\n                    <span>Open:</span> <span style=\"text-align: right; color: ${\r\n                      close >= open ? upColor : downColor\r\n                    }\">${open}</span>\r\n                    <span>High:</span> <span style=\"text-align: right; color: ${upColor}\">${high}</span>\r\n                    <span>Low:</span> <span style=\"text-align: right; color: ${downColor}\">${low}</span>\r\n                    <span>Close:</span> <span style=\"text-align: right; color: ${\r\n                      close >= open ? upColor : downColor\r\n                    }\">${close}</span>\r\n                </div>\r\n            </div>\r\n            `;\r\n    }\r\n\r\n    // 4. Indicators Section\r\n    if (indicatorParams.length > 0) {\r\n      html += `<div style=\"border-top: 1px solid #334155; margin: 5px 0; padding-top: 5px;\"></div>`;\r\n\r\n      // Group by Indicator ID (extracted from seriesName \"ID::PlotName\")\r\n      const indicators: { [key: string]: any[] } = {};\r\n\r\n      indicatorParams.forEach((p: any) => {\r\n        const parts = p.seriesName.split(\"::\");\r\n        const indId = parts.length > 1 ? parts[0] : \"Unknown\";\r\n        const plotName = parts.length > 1 ? parts[1] : p.seriesName;\r\n\r\n        if (!indicators[indId]) indicators[indId] = [];\r\n        indicators[indId].push({ ...p, displayName: plotName });\r\n      });\r\n\r\n      // Render groups\r\n      Object.keys(indicators).forEach((indId) => {\r\n        html += `\r\n            <div style=\"margin-top: 8px; font-family: ${fontFamily};\">\r\n                <div style=\"font-weight:bold; color: #fff; margin-bottom: 2px;\">${indId}</div>\r\n            `;\r\n\r\n        indicators[indId].forEach((p) => {\r\n          let val = p.value;\r\n          if (Array.isArray(val)) {\r\n            val = val[1]; // Assuming [index, value]\r\n          }\r\n\r\n          if (val === null || val === undefined) return;\r\n\r\n          const valStr =\r\n            typeof val === \"number\"\r\n              ? val.toLocaleString(undefined, { maximumFractionDigits: 4 })\r\n              : val;\r\n\r\n          html += `\r\n                <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 2px; padding-left: 8px;\">\r\n                    <div>${p.marker} <span style=\"color: #cbd5e1;\">${p.displayName}</span></div>\r\n                    <div style=\"font-size: 10px; color: #fff;padding-left:10px;\">${valStr}</div>\r\n                </div>`;\r\n        });\r\n\r\n        html += `</div>`;\r\n      });\r\n    }\r\n\r\n    return html;\r\n  }\r\n}\r\n","import { ChartContext, Plugin } from '../types';\r\n// We need to import AbstractPlugin if we check instanceof, or just treat all as Plugin interface\r\n\r\nexport class PluginManager {\r\n    private plugins: Map<string, Plugin> = new Map();\r\n    private activePluginId: string | null = null;\r\n    private context: ChartContext;\r\n    private toolbarContainer: HTMLElement;\r\n    private tooltipElement: HTMLElement | null = null;\r\n    private hideTimeout: any = null;\r\n\r\n    constructor(context: ChartContext, toolbarContainer: HTMLElement) {\r\n        this.context = context;\r\n        this.toolbarContainer = toolbarContainer;\r\n        this.createTooltip();\r\n        this.renderToolbar();\r\n    }\r\n\r\n    private createTooltip() {\r\n        this.tooltipElement = document.createElement('div');\r\n        Object.assign(this.tooltipElement.style, {\r\n            position: 'fixed',\r\n            display: 'none',\r\n            backgroundColor: '#1e293b',\r\n            color: '#e2e8f0',\r\n            padding: '6px 10px',\r\n            borderRadius: '6px',\r\n            fontSize: '13px',\r\n            lineHeight: '1.4',\r\n            fontWeight: '500',\r\n            border: '1px solid #334155',\r\n            zIndex: '9999',\r\n            pointerEvents: 'none',\r\n            whiteSpace: 'nowrap',\r\n            boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.15)',\r\n            fontFamily: this.context.getOptions().fontFamily || 'sans-serif',\r\n            transition: 'opacity 0.15s ease-in-out, transform 0.15s ease-in-out',\r\n            opacity: '0',\r\n            transform: 'translateX(-5px)',\r\n        });\r\n        document.body.appendChild(this.tooltipElement);\r\n    }\r\n\r\n    public destroy() {\r\n        if (this.tooltipElement && this.tooltipElement.parentNode) {\r\n            this.tooltipElement.parentNode.removeChild(this.tooltipElement);\r\n        }\r\n        this.tooltipElement = null;\r\n    }\r\n\r\n    private showTooltip(target: HTMLElement, text: string) {\r\n        if (!this.tooltipElement) return;\r\n\r\n        // Clear any pending hide to prevent race conditions\r\n        if (this.hideTimeout) {\r\n            clearTimeout(this.hideTimeout);\r\n            this.hideTimeout = null;\r\n        }\r\n\r\n        const rect = target.getBoundingClientRect();\r\n        this.tooltipElement.textContent = text;\r\n        this.tooltipElement.style.display = 'block';\r\n\r\n        // Position to the right of the button, centered vertically\r\n        const tooltipRect = this.tooltipElement.getBoundingClientRect();\r\n        const top = rect.top + (rect.height - tooltipRect.height) / 2;\r\n        const left = rect.right + 10; // 10px gap\r\n\r\n        this.tooltipElement.style.top = `${top}px`;\r\n        this.tooltipElement.style.left = `${left}px`;\r\n\r\n        // Trigger animation\r\n        requestAnimationFrame(() => {\r\n            if (this.tooltipElement) {\r\n                this.tooltipElement.style.opacity = '1';\r\n                this.tooltipElement.style.transform = 'translateX(0)';\r\n            }\r\n        });\r\n    }\r\n\r\n    private hideTooltip() {\r\n        if (!this.tooltipElement) return;\r\n        this.tooltipElement.style.opacity = '0';\r\n        this.tooltipElement.style.transform = 'translateX(-5px)';\r\n\r\n        if (this.hideTimeout) {\r\n            clearTimeout(this.hideTimeout);\r\n        }\r\n\r\n        // Wait for transition to finish before hiding\r\n        this.hideTimeout = setTimeout(() => {\r\n            if (this.tooltipElement) {\r\n                this.tooltipElement.style.display = 'none';\r\n            }\r\n            this.hideTimeout = null;\r\n        }, 150);\r\n    }\r\n\r\n    public register(plugin: Plugin): void {\r\n        if (this.plugins.has(plugin.id)) {\r\n            console.warn(`Plugin with id ${plugin.id} is already registered.`);\r\n            return;\r\n        }\r\n        this.plugins.set(plugin.id, plugin);\r\n        plugin.init(this.context);\r\n        this.addButton(plugin);\r\n    }\r\n\r\n    public unregister(pluginId: string): void {\r\n        const plugin = this.plugins.get(pluginId);\r\n        if (plugin) {\r\n            if (this.activePluginId === pluginId) {\r\n                this.deactivatePlugin();\r\n            }\r\n            plugin.destroy?.();\r\n            this.plugins.delete(pluginId);\r\n            this.removeButton(pluginId);\r\n        }\r\n    }\r\n\r\n    public activatePlugin(pluginId: string): void {\r\n        // If same plugin is clicked, deactivate it (toggle)\r\n        if (this.activePluginId === pluginId) {\r\n            this.deactivatePlugin();\r\n            return;\r\n        }\r\n\r\n        // Deactivate current active plugin\r\n        if (this.activePluginId) {\r\n            this.deactivatePlugin();\r\n        }\r\n\r\n        const plugin = this.plugins.get(pluginId);\r\n        if (plugin) {\r\n            this.activePluginId = pluginId;\r\n            this.setButtonActive(pluginId, true);\r\n            plugin.activate?.();\r\n        }\r\n    }\r\n\r\n    public deactivatePlugin(): void {\r\n        if (this.activePluginId) {\r\n            const plugin = this.plugins.get(this.activePluginId);\r\n            plugin?.deactivate?.();\r\n            this.setButtonActive(this.activePluginId, false);\r\n            this.activePluginId = null;\r\n        }\r\n    }\r\n\r\n    // --- UI Handling ---\r\n\r\n    private renderToolbar(): void {\r\n        this.toolbarContainer.innerHTML = '';\r\n        this.toolbarContainer.classList.add('qfchart-toolbar');\r\n        this.toolbarContainer.style.display = 'flex';\r\n        this.toolbarContainer.style.flexDirection = 'column';\r\n        this.toolbarContainer.style.width = '40px';\r\n        this.toolbarContainer.style.backgroundColor = this.context.getOptions().backgroundColor || '#1e293b';\r\n        this.toolbarContainer.style.borderRight = '1px solid #334155';\r\n        this.toolbarContainer.style.padding = '5px';\r\n        this.toolbarContainer.style.boxSizing = 'border-box';\r\n        this.toolbarContainer.style.gap = '5px';\r\n        this.toolbarContainer.style.flexShrink = '0';\r\n    }\r\n\r\n    private addButton(plugin: Plugin): void {\r\n        const btn = document.createElement('button');\r\n        btn.id = `qfchart-plugin-btn-${plugin.id}`;\r\n        // Removed native title to use custom tooltip\r\n        // btn.title = plugin.name || plugin.id;\r\n        btn.style.width = '30px';\r\n        btn.style.height = '30px';\r\n        btn.style.padding = '4px';\r\n        btn.style.border = '1px solid transparent';\r\n        btn.style.borderRadius = '4px';\r\n        btn.style.backgroundColor = 'transparent';\r\n        btn.style.cursor = 'pointer';\r\n        btn.style.color = this.context.getOptions().fontColor || '#cbd5e1';\r\n        btn.style.display = 'flex';\r\n        btn.style.alignItems = 'center';\r\n        btn.style.justifyContent = 'center';\r\n\r\n        // Icon\r\n        if (plugin.icon) {\r\n            btn.innerHTML = plugin.icon;\r\n        } else {\r\n            btn.innerText = (plugin.name || plugin.id).substring(0, 2).toUpperCase();\r\n        }\r\n\r\n        // Hover effects and Tooltip\r\n        btn.addEventListener('mouseenter', () => {\r\n            if (this.activePluginId !== plugin.id) {\r\n                btn.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';\r\n            }\r\n            this.showTooltip(btn, plugin.name || plugin.id);\r\n        });\r\n\r\n        btn.addEventListener('mouseleave', () => {\r\n            if (this.activePluginId !== plugin.id) {\r\n                btn.style.backgroundColor = 'transparent';\r\n            }\r\n            this.hideTooltip();\r\n        });\r\n\r\n        btn.onclick = () => this.activatePlugin(plugin.id);\r\n\r\n        this.toolbarContainer.appendChild(btn);\r\n    }\r\n\r\n    private removeButton(pluginId: string): void {\r\n        const btn = this.toolbarContainer.querySelector(`#qfchart-plugin-btn-${pluginId}`);\r\n        if (btn) {\r\n            btn.remove();\r\n        }\r\n    }\r\n\r\n    private setButtonActive(pluginId: string, active: boolean): void {\r\n        const btn = this.toolbarContainer.querySelector(`#qfchart-plugin-btn-${pluginId}`) as HTMLElement;\r\n        if (btn) {\r\n            if (active) {\r\n                btn.style.backgroundColor = '#2563eb'; // Blue highlight\r\n                btn.style.color = '#ffffff';\r\n            } else {\r\n                btn.style.backgroundColor = 'transparent';\r\n                btn.style.color = this.context.getOptions().fontColor || '#cbd5e1';\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { ChartContext, DrawingElement, DataCoordinate } from \"../types\";\r\nimport * as echarts from \"echarts\";\r\n\r\nexport class DrawingEditor {\r\n  private context: ChartContext;\r\n  private isEditing: boolean = false;\r\n  private currentDrawing: DrawingElement | null = null;\r\n  private editingPointIndex: number | null = null;\r\n  private zr: any;\r\n\r\n  // Temporary ZRender elements for visual feedback during drag\r\n  private editGroup: any = null;\r\n  private editLine: any = null;\r\n  private editStartPoint: any = null;\r\n  private editEndPoint: any = null;\r\n\r\n  private isMovingShape: boolean = false;\r\n  private dragStart: { x: number; y: number } | null = null;\r\n  private initialPixelPoints: { x: number; y: number }[] = [];\r\n\r\n  constructor(context: ChartContext) {\r\n    this.context = context;\r\n    this.zr = this.context.getChart().getZr();\r\n    this.bindEvents();\r\n  }\r\n\r\n  private bindEvents() {\r\n    this.context.events.on(\"drawing:point:mousedown\", this.onPointMouseDown);\r\n    this.context.events.on(\"drawing:mousedown\", this.onDrawingMouseDown);\r\n  }\r\n\r\n  private onDrawingMouseDown = (payload: {\r\n    id: string;\r\n    x: number;\r\n    y: number;\r\n  }) => {\r\n    if (this.isEditing) return;\r\n\r\n    const drawing = this.context.getDrawing(payload.id);\r\n    if (!drawing) return;\r\n\r\n    this.isEditing = true;\r\n    this.isMovingShape = true;\r\n    this.currentDrawing = JSON.parse(JSON.stringify(drawing));\r\n    this.dragStart = { x: payload.x, y: payload.y };\r\n\r\n    // Capture initial pixel positions\r\n    this.initialPixelPoints = drawing.points.map((p) => {\r\n      const pixel = this.context.coordinateConversion.dataToPixel(p);\r\n      return pixel ? { x: pixel.x, y: pixel.y } : { x: 0, y: 0 }; // Fallback\r\n    });\r\n\r\n    this.context.lockChart();\r\n    this.createEditGraphic();\r\n\r\n    this.zr.on(\"mousemove\", this.onMouseMove);\r\n    this.zr.on(\"mouseup\", this.onMouseUp);\r\n  };\r\n\r\n  private onPointMouseDown = (payload: { id: string; pointIndex: number }) => {\r\n    if (this.isEditing) return;\r\n\r\n    const drawing = this.context.getDrawing(payload.id);\r\n    if (!drawing) return;\r\n\r\n    // Start Editing\r\n    this.isEditing = true;\r\n    this.currentDrawing = JSON.parse(JSON.stringify(drawing)); // Deep copy\r\n    this.editingPointIndex = payload.pointIndex;\r\n\r\n    this.context.lockChart();\r\n\r\n    // Create visual feedback (overlay)\r\n    this.createEditGraphic();\r\n\r\n    // Hide the actual drawing (optional, but good for UX so we don't see double)\r\n    // Actually, we can just drag the overlay and update the drawing on mouseup.\r\n    // The underlying drawing remains visible but static until updated.\r\n\r\n    // Bind temporary drag listeners\r\n    this.zr.on(\"mousemove\", this.onMouseMove);\r\n    this.zr.on(\"mouseup\", this.onMouseUp);\r\n    // Global mouseup to catch releases outside chart area if needed (window listener better?)\r\n    // ZRender usually handles global mouseup if initiated within.\r\n  };\r\n\r\n  private createEditGraphic() {\r\n    if (!this.currentDrawing) return;\r\n\r\n    this.editGroup = new echarts.graphic.Group();\r\n\r\n    // We need current pixel coordinates\r\n    const p1Data = this.currentDrawing.points[0];\r\n    const p2Data = this.currentDrawing.points[1];\r\n\r\n    const p1 = this.context.coordinateConversion.dataToPixel(p1Data);\r\n    const p2 = this.context.coordinateConversion.dataToPixel(p2Data);\r\n\r\n    if (!p1 || !p2) return;\r\n\r\n    // Create Line\r\n    this.editLine = new echarts.graphic.Line({\r\n      shape: { x1: p1.x, y1: p1.y, x2: p2.x, y2: p2.y },\r\n      style: {\r\n        stroke: this.currentDrawing.style?.color || \"#3b82f6\",\r\n        lineWidth: this.currentDrawing.style?.lineWidth || 2,\r\n        lineDash: [4, 4], // Dashed to indicate editing\r\n      },\r\n      silent: true, // Events pass through to handlers\r\n    });\r\n\r\n    // Create Points (we only really need to visualize the one being dragged, but showing both is fine)\r\n    this.editStartPoint = new echarts.graphic.Circle({\r\n      shape: { cx: p1.x, cy: p1.y, r: 5 },\r\n      style: { fill: \"#fff\", stroke: \"#3b82f6\", lineWidth: 2 },\r\n      z: 1000,\r\n    });\r\n\r\n    this.editEndPoint = new echarts.graphic.Circle({\r\n      shape: { cx: p2.x, cy: p2.y, r: 5 },\r\n      style: { fill: \"#fff\", stroke: \"#3b82f6\", lineWidth: 2 },\r\n      z: 1000,\r\n    });\r\n\r\n    this.editGroup.add(this.editLine);\r\n    this.editGroup.add(this.editStartPoint);\r\n    this.editGroup.add(this.editEndPoint);\r\n\r\n    this.zr.add(this.editGroup);\r\n  }\r\n\r\n  private onMouseMove = (e: any) => {\r\n    if (!this.isEditing || !this.currentDrawing) return;\r\n\r\n    const x = e.offsetX;\r\n    const y = e.offsetY;\r\n\r\n    if (this.isMovingShape && this.dragStart) {\r\n      const dx = x - this.dragStart.x;\r\n      const dy = y - this.dragStart.y;\r\n\r\n      // Apply delta to all points\r\n      const newP1 = {\r\n        x: this.initialPixelPoints[0].x + dx,\r\n        y: this.initialPixelPoints[0].y + dy,\r\n      };\r\n      const newP2 = {\r\n        x: this.initialPixelPoints[1].x + dx,\r\n        y: this.initialPixelPoints[1].y + dy,\r\n      };\r\n\r\n      this.editLine.setShape({\r\n        x1: newP1.x,\r\n        y1: newP1.y,\r\n        x2: newP2.x,\r\n        y2: newP2.y,\r\n      });\r\n      this.editStartPoint.setShape({ cx: newP1.x, cy: newP1.y });\r\n      this.editEndPoint.setShape({ cx: newP2.x, cy: newP2.y });\r\n    } else if (this.editingPointIndex !== null) {\r\n      // Update the pixel position of the edited point in the overlay\r\n      if (this.editingPointIndex === 0) {\r\n        this.editLine.setShape({ x1: x, y1: y });\r\n        this.editStartPoint.setShape({ cx: x, cy: y });\r\n      } else {\r\n        this.editLine.setShape({ x2: x, y2: y });\r\n        this.editEndPoint.setShape({ cx: x, cy: y });\r\n      }\r\n    }\r\n  };\r\n\r\n  private onMouseUp = (e: any) => {\r\n    if (!this.isEditing) return;\r\n\r\n    // Commit changes\r\n    this.finishEditing(e.offsetX, e.offsetY);\r\n  };\r\n\r\n  private finishEditing(finalX: number, finishY: number) {\r\n    if (!this.currentDrawing) return;\r\n\r\n    if (this.isMovingShape && this.dragStart) {\r\n      const dx = finalX - this.dragStart.x;\r\n      const dy = finishY - this.dragStart.y;\r\n\r\n      // Update all points\r\n      const newPoints = this.initialPixelPoints.map((p, i) => {\r\n        const newX = p.x + dx;\r\n        const newY = p.y + dy;\r\n        return this.context.coordinateConversion.pixelToData({\r\n          x: newX,\r\n          y: newY,\r\n        });\r\n      });\r\n\r\n      // Check if conversion succeeded\r\n      if (newPoints.every((p) => p !== null)) {\r\n        // Update points\r\n        // Assuming 2 points for line tool\r\n        if (newPoints[0] && newPoints[1]) {\r\n          this.currentDrawing.points[0] = newPoints[0];\r\n          this.currentDrawing.points[1] = newPoints[1];\r\n\r\n          // Update pane index if we moved significantly (using start point as ref)\r\n          if (newPoints[0].paneIndex !== undefined) {\r\n            this.currentDrawing.paneIndex = newPoints[0].paneIndex;\r\n          }\r\n\r\n          this.context.updateDrawing(this.currentDrawing);\r\n        }\r\n      }\r\n    } else if (this.editingPointIndex !== null) {\r\n      // Convert final pixel to data\r\n      const newData = this.context.coordinateConversion.pixelToData({\r\n        x: finalX,\r\n        y: finishY,\r\n      });\r\n\r\n      if (newData) {\r\n        this.currentDrawing.points[this.editingPointIndex] = newData;\r\n\r\n        if (this.editingPointIndex === 0 && newData.paneIndex !== undefined) {\r\n          this.currentDrawing.paneIndex = newData.paneIndex;\r\n        }\r\n\r\n        this.context.updateDrawing(this.currentDrawing);\r\n      }\r\n    }\r\n\r\n    // Cleanup\r\n    this.isEditing = false;\r\n    this.isMovingShape = false;\r\n    this.dragStart = null;\r\n    this.initialPixelPoints = [];\r\n    this.currentDrawing = null;\r\n    this.editingPointIndex = null;\r\n\r\n    if (this.editGroup) {\r\n      this.zr.remove(this.editGroup);\r\n      this.editGroup = null;\r\n    }\r\n\r\n    this.zr.off(\"mousemove\", this.onMouseMove);\r\n    this.zr.off(\"mouseup\", this.onMouseUp);\r\n\r\n    this.context.unlockChart();\r\n  }\r\n}\r\n","export type EventType =\r\n    | 'mouse:down'\r\n    | 'mouse:move'\r\n    | 'mouse:up'\r\n    | 'mouse:click'\r\n    | 'chart:resize'\r\n    | 'chart:dataZoom'\r\n    | 'chart:updated'\r\n    | 'plugin:activated'\r\n    | 'plugin:deactivated'\r\n    | 'drawing:hover'\r\n    | 'drawing:mouseout'\r\n    | 'drawing:mousedown'\r\n    | 'drawing:click'\r\n    | 'drawing:point:hover'\r\n    | 'drawing:point:mouseout'\r\n    | 'drawing:point:mousedown'\r\n    | 'drawing:point:click'\r\n    | 'drawing:selected'\r\n    | 'drawing:deselected'\r\n    | 'drawing:deleted';\r\n\r\nexport interface DrawingEventPayload {\r\n    id: string;\r\n    type?: string;\r\n    pointIndex?: number;\r\n    event?: any;\r\n    x?: number;\r\n    y?: number;\r\n}\r\n\r\nexport type EventHandler<T = any> = (payload: T) => void;\r\n\r\nexport class EventBus {\r\n    private handlers: Map<EventType, Set<EventHandler>> = new Map();\r\n\r\n    public on<T = any>(event: EventType, handler: EventHandler<T>): void {\r\n        if (!this.handlers.has(event)) {\r\n            this.handlers.set(event, new Set());\r\n        }\r\n        this.handlers.get(event)!.add(handler);\r\n    }\r\n\r\n    public off<T = any>(event: EventType, handler: EventHandler<T>): void {\r\n        const handlers = this.handlers.get(event);\r\n        if (handlers) {\r\n            handlers.delete(handler);\r\n        }\r\n    }\r\n\r\n    public emit<T = any>(event: EventType, payload?: T): void {\r\n        const handlers = this.handlers.get(event);\r\n        if (handlers) {\r\n            handlers.forEach((handler) => {\r\n                try {\r\n                    handler(payload);\r\n                } catch (e) {\r\n                    console.error(`Error in EventBus handler for ${event}:`, e);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    public clear(): void {\r\n        this.handlers.clear();\r\n    }\r\n}\r\n","import * as echarts from 'echarts';\r\nimport { OHLCV, IndicatorPlot, QFChartOptions, Indicator as IndicatorInterface, ChartContext, Plugin } from './types';\r\nimport { Indicator } from './components/Indicator';\r\nimport { LayoutManager } from './components/LayoutManager';\r\nimport { SeriesBuilder } from './components/SeriesBuilder';\r\nimport { GraphicBuilder } from './components/GraphicBuilder';\r\nimport { TooltipFormatter } from './components/TooltipFormatter';\r\nimport { PluginManager } from './components/PluginManager';\r\nimport { DrawingEditor } from './components/DrawingEditor';\r\nimport { EventBus } from './utils/EventBus';\r\n\r\nexport class QFChart implements ChartContext {\r\n    private chart: echarts.ECharts;\r\n    private options: QFChartOptions;\r\n    private marketData: OHLCV[] = [];\r\n    private indicators: Map<string, Indicator> = new Map();\r\n    private timeToIndex: Map<number, number> = new Map();\r\n    private pluginManager: PluginManager;\r\n    private drawingEditor: DrawingEditor;\r\n    public events: EventBus = new EventBus();\r\n    private isMainCollapsed: boolean = false;\r\n    private maximizedPaneId: string | null = null;\r\n    private countdownInterval: any = null;\r\n\r\n    private selectedDrawingId: string | null = null; // Track selected drawing\r\n\r\n    // Drawing System\r\n    private drawings: import('./types').DrawingElement[] = [];\r\n\r\n    public coordinateConversion = {\r\n        pixelToData: (point: { x: number; y: number }) => {\r\n            // Find which grid/pane the point is in\r\n            // We iterate through all panes (series indices usually match pane indices for base series)\r\n            // Actually, we need to know how many panes there are.\r\n            // We can use the layout logic or just check grid indices.\r\n            // ECharts instance has getOption().\r\n            const option = this.chart.getOption() as any;\r\n            if (!option || !option.grid) return null;\r\n\r\n            const gridCount = option.grid.length;\r\n            for (let i = 0; i < gridCount; i++) {\r\n                if (this.chart.containPixel({ gridIndex: i }, [point.x, point.y])) {\r\n                    // Found the pane\r\n                    const p = this.chart.convertFromPixel({ seriesIndex: i }, [point.x, point.y]);\r\n                    // Note: convertFromPixel might need seriesIndex or gridIndex depending on setup.\r\n                    // Using gridIndex in convertFromPixel is supported in newer ECharts but sometimes tricky.\r\n                    // Since we have one base series per pane (candlestick at 0, indicators at 1+),\r\n                    // assuming seriesIndex = gridIndex usually works if they are mapped 1:1.\r\n                    // Wait, candlestick is series 0. Indicators are subsequent series.\r\n                    // Series index != grid index necessarily.\r\n                    // BUT we can use { gridIndex: i } for convertFromPixel too!\r\n                    const pGrid = this.chart.convertFromPixel({ gridIndex: i }, [point.x, point.y]);\r\n\r\n                    if (pGrid) {\r\n                        // Store padded coordinates directly (don't subtract offset)\r\n                        // This ensures all coordinates are positive and within the valid padded range\r\n                        return { timeIndex: Math.round(pGrid[0]), value: pGrid[1], paneIndex: i };\r\n                    }\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n        dataToPixel: (point: { timeIndex: number; value: number; paneIndex?: number }) => {\r\n            const paneIdx = point.paneIndex || 0;\r\n            // Coordinates are already in padded space, so use directly\r\n            const p = this.chart.convertToPixel({ gridIndex: paneIdx }, [point.timeIndex, point.value]);\r\n            if (p) {\r\n                return { x: p[0], y: p[1] };\r\n            }\r\n            return null;\r\n        },\r\n    };\r\n\r\n    // Default colors and constants\r\n    private readonly upColor: string = '#00da3c';\r\n    private readonly downColor: string = '#ec0000';\r\n    private readonly defaultPadding = 0.0;\r\n    private padding: number;\r\n    private dataIndexOffset: number = 0; // Offset for phantom padding data\r\n\r\n    // DOM Elements for Layout\r\n    private rootContainer: HTMLElement;\r\n    private layoutContainer: HTMLElement;\r\n    private toolbarContainer: HTMLElement; // New Toolbar\r\n    private leftSidebar: HTMLElement;\r\n    private rightSidebar: HTMLElement;\r\n    private chartContainer: HTMLElement;\r\n\r\n    constructor(container: HTMLElement, options: QFChartOptions = {}) {\r\n        this.rootContainer = container;\r\n        this.options = {\r\n            title: 'Market',\r\n            height: '600px',\r\n            backgroundColor: '#1e293b',\r\n            upColor: '#00da3c',\r\n            downColor: '#ec0000',\r\n            fontColor: '#cbd5e1',\r\n            fontFamily: 'sans-serif',\r\n            padding: 0.01,\r\n            dataZoom: {\r\n                visible: true,\r\n                position: 'top',\r\n                height: 6,\r\n            },\r\n            layout: {\r\n                mainPaneHeight: '50%',\r\n                gap: 13,\r\n            },\r\n            watermark: true,\r\n            ...options,\r\n        };\r\n\r\n        if (this.options.upColor) this.upColor = this.options.upColor;\r\n        if (this.options.downColor) this.downColor = this.options.downColor;\r\n        this.padding = this.options.padding !== undefined ? this.options.padding : this.defaultPadding;\r\n\r\n        if (this.options.height) {\r\n            if (typeof this.options.height === 'number') {\r\n                this.rootContainer.style.height = `${this.options.height}px`;\r\n            } else {\r\n                this.rootContainer.style.height = this.options.height;\r\n            }\r\n        }\r\n\r\n        // Initialize DOM Layout\r\n        this.rootContainer.innerHTML = '';\r\n\r\n        // Layout Container (Flex Row)\r\n        this.layoutContainer = document.createElement('div');\r\n        this.layoutContainer.style.display = 'flex';\r\n        this.layoutContainer.style.width = '100%';\r\n        this.layoutContainer.style.height = '100%';\r\n        this.layoutContainer.style.overflow = 'hidden';\r\n        this.rootContainer.appendChild(this.layoutContainer);\r\n\r\n        // Left Sidebar\r\n        this.leftSidebar = document.createElement('div');\r\n        this.leftSidebar.style.display = 'none';\r\n        this.leftSidebar.style.width = '250px'; // Default width\r\n        this.leftSidebar.style.flexShrink = '0';\r\n        this.leftSidebar.style.overflowY = 'auto';\r\n        this.leftSidebar.style.backgroundColor = this.options.backgroundColor || '#1e293b';\r\n        this.leftSidebar.style.borderRight = '1px solid #334155';\r\n        this.leftSidebar.style.padding = '10px';\r\n        this.leftSidebar.style.boxSizing = 'border-box';\r\n        this.leftSidebar.style.color = '#cbd5e1';\r\n        this.leftSidebar.style.fontSize = '12px';\r\n        this.leftSidebar.style.fontFamily = this.options.fontFamily || 'sans-serif';\r\n        this.layoutContainer.appendChild(this.leftSidebar);\r\n\r\n        // Toolbar Container\r\n        this.toolbarContainer = document.createElement('div');\r\n        this.layoutContainer.appendChild(this.toolbarContainer);\r\n\r\n        // Chart Container\r\n        this.chartContainer = document.createElement('div');\r\n        this.chartContainer.style.flexGrow = '1';\r\n        this.chartContainer.style.height = '100%';\r\n        this.chartContainer.style.overflow = 'hidden';\r\n        this.layoutContainer.appendChild(this.chartContainer);\r\n\r\n        // Right Sidebar\r\n        this.rightSidebar = document.createElement('div');\r\n        this.rightSidebar.style.display = 'none';\r\n        this.rightSidebar.style.width = '250px';\r\n        this.rightSidebar.style.flexShrink = '0';\r\n        this.rightSidebar.style.overflowY = 'auto';\r\n        this.rightSidebar.style.backgroundColor = this.options.backgroundColor || '#1e293b';\r\n        this.rightSidebar.style.borderLeft = '1px solid #334155';\r\n        this.rightSidebar.style.padding = '10px';\r\n        this.rightSidebar.style.boxSizing = 'border-box';\r\n        this.rightSidebar.style.color = '#cbd5e1';\r\n        this.rightSidebar.style.fontSize = '12px';\r\n        this.rightSidebar.style.fontFamily = this.options.fontFamily || 'sans-serif';\r\n        this.layoutContainer.appendChild(this.rightSidebar);\r\n\r\n        this.chart = echarts.init(this.chartContainer);\r\n        this.pluginManager = new PluginManager(this, this.toolbarContainer);\r\n        this.drawingEditor = new DrawingEditor(this);\r\n\r\n        // Bind global chart/ZRender events to the EventBus\r\n        this.chart.on('dataZoom', (params: any) => {\r\n            this.events.emit('chart:dataZoom', params);\r\n            \r\n            // Auto-hide tooltip when dragging chart if triggerOn is 'click' and position is 'floating'\r\n            const triggerOn = this.options.databox?.triggerOn;\r\n            const position = this.options.databox?.position;\r\n            if (triggerOn === 'click' && position === 'floating') {\r\n                // Hide tooltip by dispatching a hideTooltip action\r\n                this.chart.dispatchAction({\r\n                    type: 'hideTip'\r\n                });\r\n            }\r\n        });\r\n        // @ts-ignore - ECharts event handler type mismatch\r\n        this.chart.on('finished', (params: any) => this.events.emit('chart:updated', params)); // General chart update\r\n        // @ts-ignore - ECharts ZRender event handler type mismatch\r\n        this.chart.getZr().on('mousedown', (params: any) => this.events.emit('mouse:down', params));\r\n        // @ts-ignore - ECharts ZRender event handler type mismatch\r\n        this.chart.getZr().on('mousemove', (params: any) => this.events.emit('mouse:move', params));\r\n        // @ts-ignore - ECharts ZRender event handler type mismatch\r\n        this.chart.getZr().on('mouseup', (params: any) => this.events.emit('mouse:up', params));\r\n        // @ts-ignore - ECharts ZRender event handler type mismatch\r\n        this.chart.getZr().on('click', (params: any) => this.events.emit('mouse:click', params));\r\n\r\n        const zr = this.chart.getZr();\r\n        const originalSetCursorStyle = zr.setCursorStyle;\r\n        zr.setCursorStyle = function (cursorStyle: string) {\r\n            // Change 'grab' (default roam cursor) to  'crosshair' (more suitable for candlestick chart)\r\n            if (cursorStyle === 'grab') {\r\n                cursorStyle = 'crosshair';\r\n            }\r\n            // Call the original method with your modified style\r\n            originalSetCursorStyle.call(this, cursorStyle);\r\n        };\r\n\r\n        // Bind Drawing Events\r\n        this.bindDrawingEvents();\r\n\r\n        window.addEventListener('resize', this.resize.bind(this));\r\n\r\n        // Listen for fullscreen change to restore state if exited via ESC\r\n        document.addEventListener('fullscreenchange', this.onFullscreenChange);\r\n\r\n        // Keyboard listener for deletion\r\n        document.addEventListener('keydown', this.onKeyDown);\r\n    }\r\n\r\n    private onKeyDown = (e: KeyboardEvent) => {\r\n        if ((e.key === 'Delete' || e.key === 'Backspace') && this.selectedDrawingId) {\r\n            this.removeDrawing(this.selectedDrawingId);\r\n            this.selectedDrawingId = null;\r\n            this.render();\r\n            // Optional: emit deleted event here or in removeDrawing?\r\n            // Since removeDrawing is generic, maybe better here if we want 'deleted by user' nuance.\r\n            // But removeDrawing is called from other places too.\r\n        }\r\n    };\r\n\r\n    private onFullscreenChange = () => {\r\n        this.render();\r\n    };\r\n\r\n    private bindDrawingEvents() {\r\n        let hideTimeout: any = null;\r\n        let lastHoveredGroup: any = null;\r\n\r\n        // Helper to get drawing info\r\n        const getDrawingInfo = (params: any) => {\r\n            if (!params || params.componentType !== 'series' || !params.seriesName?.startsWith('drawings')) {\r\n                return null;\r\n            }\r\n\r\n            // Find the drawing\r\n            const paneIndex = params.seriesIndex; // We can't rely on seriesIndex to find pane index easily as it shifts.\r\n            // But we named the series \"drawings-pane-{index}\".\r\n            const match = params.seriesName.match(/drawings-pane-(\\d+)/);\r\n            if (!match) return null;\r\n\r\n            const paneIdx = parseInt(match[1]);\r\n\r\n            // We stored drawings for this pane in render(), but here we access the flat list?\r\n            // Wait, params.dataIndex is the index in the filtered array passed to that series.\r\n            // We need to re-find the drawing or store metadata.\r\n            // In render(), we map `drawingsByPane`.\r\n\r\n            // Efficient way: Re-filter to get the specific drawing.\r\n            // Assuming the order in render() is preserved.\r\n            const paneDrawings = this.drawings.filter((d) => (d.paneIndex || 0) === paneIdx);\r\n            const drawing = paneDrawings[params.dataIndex];\r\n\r\n            if (!drawing) return null;\r\n\r\n            // Check target for specific part (line or point)\r\n            // ECharts event params.event.target is the graphic element\r\n            const targetName = params.event?.target?.name; // 'line', 'point-start', 'point-end'\r\n\r\n            return { drawing, targetName, paneIdx };\r\n        };\r\n\r\n        this.chart.on('mouseover', (params: any) => {\r\n            const info = getDrawingInfo(params);\r\n            if (!info) return;\r\n\r\n            // Handle visibility of points\r\n            const group = params.event?.target?.parent;\r\n            if (group) {\r\n                // If the drawing is selected, we don't want hover to mess with opacity\r\n                // However, the user might be hovering a DIFFERENT drawing.\r\n                // Let's check the drawing ID from 'info'.\r\n                const isSelected = info.drawing.id === this.selectedDrawingId;\r\n\r\n                if (hideTimeout) {\r\n                    clearTimeout(hideTimeout);\r\n                    hideTimeout = null;\r\n                }\r\n\r\n                // Show points if not selected (if selected, they are already visible)\r\n                if (!isSelected) {\r\n                    group.children().forEach((child: any) => {\r\n                        if (child.name && child.name.startsWith('point')) {\r\n                            child.attr('style', { opacity: 1 });\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // Handle switching groups\r\n                if (lastHoveredGroup && lastHoveredGroup !== group) {\r\n                    // Check if last group belongs to the selected drawing?\r\n                    // We don't have easy access to the drawing ID of 'lastHoveredGroup' unless we stored it.\r\n                    // But we can just iterate and hide points.\r\n                    // Wait, if lastHoveredGroup IS the selected drawing, we should NOT hide points.\r\n                    // We need to know if lastHoveredGroup corresponds to selected drawing.\r\n                    // Storing 'lastHoveredDrawingId' would be better.\r\n                    // Simple fix: We rely on the render() logic which sets opacity: 1 for selected.\r\n                    // If we manually set opacity: 0 via ZRender attr, it might override the initial render state?\r\n                    // Yes, ZRender elements are persistent until re-render.\r\n                    // So we must be careful not to hide points of the selected drawing.\r\n                    // But we don't know the ID of lastHoveredGroup here easily.\r\n                    // Let's modify the hide logic to be safer.\r\n                }\r\n                lastHoveredGroup = group;\r\n            }\r\n\r\n            if (info.targetName === 'line') {\r\n                this.events.emit('drawing:hover', {\r\n                    id: info.drawing.id,\r\n                    type: info.drawing.type,\r\n                });\r\n                // Set cursor\r\n                this.chart.getZr().setCursorStyle('move');\r\n            } else if (info.targetName?.startsWith('point')) {\r\n                const pointIdx = info.targetName === 'point-start' ? 0 : 1;\r\n                this.events.emit('drawing:point:hover', {\r\n                    id: info.drawing.id,\r\n                    pointIndex: pointIdx,\r\n                });\r\n                this.chart.getZr().setCursorStyle('pointer');\r\n            }\r\n        });\r\n\r\n        this.chart.on('mouseout', (params: any) => {\r\n            const info = getDrawingInfo(params);\r\n            if (!info) return;\r\n\r\n            // Hide points (with slight delay or check)\r\n            const group = params.event?.target?.parent;\r\n\r\n            // If selected, do not hide points\r\n            if (info.drawing.id === this.selectedDrawingId) {\r\n                // Keep points visible\r\n                return;\r\n            }\r\n\r\n            // Delay hide to allow moving between siblings\r\n            hideTimeout = setTimeout(() => {\r\n                if (group) {\r\n                    // Check selection again inside timeout just in case\r\n                    if (this.selectedDrawingId === info.drawing.id) return;\r\n\r\n                    group.children().forEach((child: any) => {\r\n                        if (child.name && child.name.startsWith('point')) {\r\n                            child.attr('style', { opacity: 0 });\r\n                        }\r\n                    });\r\n                }\r\n                if (lastHoveredGroup === group) {\r\n                    lastHoveredGroup = null;\r\n                }\r\n            }, 50);\r\n\r\n            if (info.targetName === 'line') {\r\n                this.events.emit('drawing:mouseout', { id: info.drawing.id });\r\n            } else if (info.targetName?.startsWith('point')) {\r\n                const pointIdx = info.targetName === 'point-start' ? 0 : 1;\r\n                this.events.emit('drawing:point:mouseout', {\r\n                    id: info.drawing.id,\r\n                    pointIndex: pointIdx,\r\n                });\r\n            }\r\n            this.chart.getZr().setCursorStyle('default');\r\n        });\r\n\r\n        this.chart.on('mousedown', (params: any) => {\r\n            const info = getDrawingInfo(params);\r\n            if (!info) return;\r\n\r\n            const event = params.event?.event || params.event;\r\n            const x = event?.offsetX;\r\n            const y = event?.offsetY;\r\n\r\n            if (info.targetName === 'line') {\r\n                this.events.emit('drawing:mousedown', {\r\n                    id: info.drawing.id,\r\n                    x,\r\n                    y,\r\n                });\r\n            } else if (info.targetName?.startsWith('point')) {\r\n                const pointIdx = info.targetName === 'point-start' ? 0 : 1;\r\n                this.events.emit('drawing:point:mousedown', {\r\n                    id: info.drawing.id,\r\n                    pointIndex: pointIdx,\r\n                    x,\r\n                    y,\r\n                });\r\n            }\r\n        });\r\n\r\n        this.chart.on('click', (params: any) => {\r\n            const info = getDrawingInfo(params);\r\n            if (!info) return;\r\n\r\n            // Select Drawing logic\r\n            if (this.selectedDrawingId !== info.drawing.id) {\r\n                this.selectedDrawingId = info.drawing.id;\r\n                this.events.emit('drawing:selected', { id: info.drawing.id });\r\n                this.render(); // Re-render to update opacity permanent state\r\n            }\r\n\r\n            if (info.targetName === 'line') {\r\n                this.events.emit('drawing:click', { id: info.drawing.id });\r\n            } else if (info.targetName?.startsWith('point')) {\r\n                const pointIdx = info.targetName === 'point-start' ? 0 : 1;\r\n                this.events.emit('drawing:point:click', {\r\n                    id: info.drawing.id,\r\n                    pointIndex: pointIdx,\r\n                });\r\n            }\r\n        });\r\n\r\n        // Background click to deselect\r\n        this.chart.getZr().on('click', (params: any) => {\r\n            // If target is undefined or not part of a drawing series we know...\r\n            if (!params.target) {\r\n                if (this.selectedDrawingId) {\r\n                    this.events.emit('drawing:deselected', { id: this.selectedDrawingId });\r\n                    this.selectedDrawingId = null;\r\n                    this.render();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // --- Plugin System Integration ---\r\n\r\n    public getChart(): echarts.ECharts {\r\n        return this.chart;\r\n    }\r\n\r\n    public getMarketData(): OHLCV[] {\r\n        return this.marketData;\r\n    }\r\n\r\n    public getTimeToIndex(): Map<number, number> {\r\n        return this.timeToIndex;\r\n    }\r\n\r\n    public getOptions(): QFChartOptions {\r\n        return this.options;\r\n    }\r\n\r\n    public disableTools(): void {\r\n        this.pluginManager.deactivatePlugin();\r\n    }\r\n\r\n    public registerPlugin(plugin: Plugin): void {\r\n        this.pluginManager.register(plugin);\r\n    }\r\n\r\n    // --- Drawing System ---\r\n\r\n    public addDrawing(drawing: import('./types').DrawingElement): void {\r\n        this.drawings.push(drawing);\r\n        this.render(); // Re-render to show new drawing\r\n    }\r\n\r\n    public removeDrawing(id: string): void {\r\n        const index = this.drawings.findIndex((d) => d.id === id);\r\n        if (index !== -1) {\r\n            const drawing = this.drawings[index];\r\n            this.drawings.splice(index, 1);\r\n            this.events.emit('drawing:deleted', { id: drawing.id });\r\n            this.render();\r\n        }\r\n    }\r\n\r\n    public getDrawing(id: string): import('./types').DrawingElement | undefined {\r\n        return this.drawings.find((d) => d.id === id);\r\n    }\r\n\r\n    public updateDrawing(drawing: import('./types').DrawingElement): void {\r\n        const index = this.drawings.findIndex((d) => d.id === drawing.id);\r\n        if (index !== -1) {\r\n            this.drawings[index] = drawing;\r\n            this.render();\r\n        }\r\n    }\r\n\r\n    // --- Interaction Locking ---\r\n\r\n    private isLocked: boolean = false;\r\n    private lockedState: any = null;\r\n\r\n    public lockChart(): void {\r\n        if (this.isLocked) return;\r\n        this.isLocked = true;\r\n\r\n        const option = this.chart.getOption() as any;\r\n\r\n        // Store current state to restore later if needed (though setOption merge handles most)\r\n        // Actually, simply disabling interactions is enough.\r\n\r\n        // We update the option to disable dataZoom and tooltip\r\n        this.chart.setOption({\r\n            dataZoom: option.dataZoom.map((dz: any) => ({ ...dz, disabled: true })),\r\n            tooltip: { show: false }, // Hide tooltip during drag\r\n            // We can also disable series interaction if needed, but custom series is handled by us.\r\n        });\r\n    }\r\n\r\n    public unlockChart(): void {\r\n        if (!this.isLocked) return;\r\n        this.isLocked = false;\r\n\r\n        const option = this.chart.getOption() as any;\r\n\r\n        // Restore interactions\r\n        // We assume dataZoom was enabled before. If not, we might re-enable it wrongly.\r\n        // Ideally we should restore from 'options' or check the previous state.\r\n        // Since 'render' rebuilds everything from 'this.options', we can just call render?\r\n        // But render is expensive.\r\n        // Better: Re-enable based on this.options.\r\n\r\n        // Re-enable dataZoom\r\n        const dzConfig = this.options.dataZoom || {};\r\n        const dzVisible = dzConfig.visible ?? true;\r\n\r\n        // We can map over current option.dataZoom and set disabled: false\r\n        if (option.dataZoom) {\r\n            this.chart.setOption({\r\n                dataZoom: option.dataZoom.map((dz: any) => ({\r\n                    ...dz,\r\n                    disabled: false,\r\n                })),\r\n                tooltip: { show: true },\r\n            });\r\n        }\r\n    }\r\n\r\n    // --------------------------------\r\n\r\n    public setZoom(start: number, end: number): void {\r\n        this.chart.dispatchAction({\r\n            type: 'dataZoom',\r\n            start,\r\n            end,\r\n        });\r\n    }\r\n\r\n    public setMarketData(data: OHLCV[]): void {\r\n        this.marketData = data;\r\n        this.rebuildTimeIndex();\r\n        this.render();\r\n    }\r\n\r\n    /**\r\n     * Update market data incrementally without full re-render\r\n     * Merges new/updated OHLCV data with existing data by timestamp\r\n     *\r\n     * @param data - Array of OHLCV data to merge\r\n     *\r\n     * @remarks\r\n     * **Performance Optimization**: This method only triggers a chart update if the data array contains\r\n     * new or modified bars. If an empty array is passed, no update occurs (expected behavior).\r\n     *\r\n     * **Usage Pattern for Updating Indicators**:\r\n     * When updating both market data and indicators, follow this order:\r\n     *\r\n     * 1. Update indicator data first using `indicator.updateData(plots)`\r\n     * 2. Then call `chart.updateData(newBars)` with the new/modified market data\r\n     *\r\n     * The chart update will trigger a re-render that includes the updated indicator data.\r\n     *\r\n     * **Important**: If you update indicator data without updating market data (e.g., recalculation\r\n     * with same bars), you must still call `chart.updateData([...])` with at least one bar\r\n     * to trigger the re-render. Calling with an empty array will NOT trigger an update.\r\n     *\r\n     * @example\r\n     * ```typescript\r\n     * // Step 1: Update indicator data\r\n     * macdIndicator.updateData({\r\n     *   macd: { data: [{ time: 1234567890, value: 150 }], options: { style: 'line', color: '#2962FF' } }\r\n     * });\r\n     *\r\n     * // Step 2: Update market data (triggers re-render with new indicator data)\r\n     * chart.updateData([\r\n     *   { time: 1234567890, open: 100, high: 105, low: 99, close: 103, volume: 1000 }\r\n     * ]);\r\n     * ```\r\n     *\r\n     * @example\r\n     * ```typescript\r\n     * // If only updating existing bar (e.g., real-time tick updates):\r\n     * const lastBar = { ...existingBar, close: newPrice, high: Math.max(existingBar.high, newPrice) };\r\n     * chart.updateData([lastBar]); // Updates by timestamp\r\n     * ```\r\n     */\r\n    public updateData(data: OHLCV[]): void {\r\n        if (data.length === 0) return;\r\n\r\n        // Build a map of existing data by time for O(1) lookups\r\n        const existingTimeMap = new Map<number, OHLCV>();\r\n        this.marketData.forEach((bar) => {\r\n            existingTimeMap.set(bar.time, bar);\r\n        });\r\n\r\n        // Track if we added new data or only updated existing\r\n        let hasNewData = false;\r\n\r\n        // Merge new data\r\n        data.forEach((bar) => {\r\n            if (!existingTimeMap.has(bar.time)) {\r\n                hasNewData = true;\r\n            }\r\n            existingTimeMap.set(bar.time, bar);\r\n        });\r\n\r\n        // Rebuild marketData array sorted by time\r\n        this.marketData = Array.from(existingTimeMap.values()).sort((a, b) => a.time - b.time);\r\n\r\n        // Update timeToIndex map\r\n        this.rebuildTimeIndex();\r\n\r\n        // Use pre-calculated padding points from rebuildTimeIndex\r\n        const paddingPoints = this.dataIndexOffset;\r\n\r\n        // Build candlestick data with padding\r\n        const candlestickSeries = SeriesBuilder.buildCandlestickSeries(this.marketData, this.options);\r\n        const emptyCandle = { value: [NaN, NaN, NaN, NaN], itemStyle: { opacity: 0 } };\r\n        const paddedCandlestickData = [\r\n            ...Array(paddingPoints).fill(emptyCandle),\r\n            ...candlestickSeries.data,\r\n            ...Array(paddingPoints).fill(emptyCandle),\r\n        ];\r\n\r\n        // Build category data with padding\r\n        const categoryData = [\r\n            ...Array(paddingPoints).fill(''),\r\n            ...this.marketData.map((k) => new Date(k.time).toLocaleString()),\r\n            ...Array(paddingPoints).fill(''),\r\n        ];\r\n\r\n        // Build indicator series data\r\n        const currentOption = this.chart.getOption() as any;\r\n        const layout = LayoutManager.calculate(\r\n            this.chart.getHeight(),\r\n            this.indicators,\r\n            this.options,\r\n            this.isMainCollapsed,\r\n            this.maximizedPaneId,\r\n            this.marketData\r\n        );\r\n\r\n        // Pass full padded candlestick data for shape positioning\r\n        // But SeriesBuilder expects 'OHLCV[]', while paddedCandlestickData is array of arrays [open,close,low,high]\r\n        // We need to pass the raw marketData but ALIGNED with padding?\r\n        // Or better, pass the processed OHLCV array?\r\n        // Let's pass the raw marketData, but SeriesBuilder needs to handle the padding internally or we pass padded data?\r\n        // SeriesBuilder.buildIndicatorSeries iterates over 'totalDataLength' (which includes padding) and uses 'dataIndexOffset'.\r\n        // So passing 'this.marketData' is not enough because index 0 in marketData corresponds to 'paddingPoints' index in chart.\r\n        // We should pass an array that aligns with chart indices.\r\n        // Let's reconstruct an array of objects {high, low} that includes padding.\r\n\r\n        const paddedOHLCVForShapes = [...Array(paddingPoints).fill(null), ...this.marketData, ...Array(paddingPoints).fill(null)];\r\n\r\n        const { series: indicatorSeries, barColors } = SeriesBuilder.buildIndicatorSeries(\r\n            this.indicators,\r\n            this.timeToIndex,\r\n            layout.paneLayout,\r\n            categoryData.length,\r\n            paddingPoints,\r\n            paddedOHLCVForShapes, // Pass padded OHLCV data\r\n            layout.overlayYAxisMap, // Pass overlay Y-axis mapping\r\n            layout.separatePaneYAxisOffset // Pass Y-axis offset for separate panes\r\n        );\r\n\r\n        // Apply barColors to candlestick data\r\n        const coloredCandlestickData = paddedCandlestickData.map((candle: any, i: number) => {\r\n            if (barColors[i]) {\r\n                return {\r\n                    value: candle.value || candle,\r\n                    itemStyle: {\r\n                        color: barColors[i],\r\n                        color0: barColors[i],\r\n                        borderColor: barColors[i],\r\n                        borderColor0: barColors[i],\r\n                    },\r\n                };\r\n            }\r\n            return candle;\r\n        });\r\n\r\n        // Update only the data arrays in the option, not the full config\r\n        const updateOption: any = {\r\n            xAxis: currentOption.xAxis.map((axis: any, index: number) => ({\r\n                data: categoryData,\r\n            })),\r\n            series: [\r\n                {\r\n                    data: coloredCandlestickData,\r\n                    markLine: candlestickSeries.markLine, // Ensure markLine is updated\r\n                },\r\n                ...indicatorSeries.map((s) => {\r\n                    const update: any = { data: s.data };\r\n                    // If the series has a renderItem function (custom series like background),\r\n                    // we MUST update it because it likely closes over variables (colorArray)\r\n                    // from the SeriesBuilder scope which have been recreated.\r\n                    if (s.renderItem) {\r\n                        update.renderItem = s.renderItem;\r\n                    }\r\n                    return update;\r\n                }),\r\n            ],\r\n        };\r\n\r\n        // Merge the update (don't replace entire config)\r\n        this.chart.setOption(updateOption, { notMerge: false });\r\n\r\n        // Update countdown if needed\r\n        this.startCountdown();\r\n    }\r\n\r\n    private startCountdown() {\r\n        // Stop existing timer\r\n        this.stopCountdown();\r\n\r\n        if (!this.options.lastPriceLine?.showCountdown || !this.options.interval || this.marketData.length === 0) {\r\n            return;\r\n        }\r\n\r\n        const updateLabel = () => {\r\n            if (this.marketData.length === 0) return;\r\n            const lastBar = this.marketData[this.marketData.length - 1];\r\n            const nextCloseTime = lastBar.time + (this.options.interval || 0);\r\n            const now = Date.now();\r\n            const diff = nextCloseTime - now;\r\n\r\n            if (diff <= 0) {\r\n                // Timer expired (bar closed), maybe wait for next update\r\n                // Or show 00:00:00\r\n                return;\r\n            }\r\n\r\n            // Format time\r\n            const absDiff = Math.abs(diff);\r\n            const hours = Math.floor(absDiff / 3600000);\r\n            const minutes = Math.floor((absDiff % 3600000) / 60000);\r\n            const seconds = Math.floor((absDiff % 60000) / 1000);\r\n\r\n            const timeString = `${hours > 0 ? hours.toString().padStart(2, '0') + ':' : ''}${minutes.toString().padStart(2, '0')}:${seconds\r\n                .toString()\r\n                .padStart(2, '0')}`;\r\n\r\n            // Update markLine label\r\n            // We need to find the candlestick series index (usually 0)\r\n            // But we can update by name if unique, or by index. SeriesBuilder sets name to options.title or 'Market'\r\n            // Safest is to modify the option directly for series index 0 (if that's where candle is)\r\n            // Or better, check current option\r\n            const currentOption = this.chart.getOption() as any;\r\n            if (!currentOption || !currentOption.series) return;\r\n\r\n            // Find candlestick series (type 'candlestick')\r\n            const candleSeriesIndex = currentOption.series.findIndex((s: any) => s.type === 'candlestick');\r\n            if (candleSeriesIndex === -1) return;\r\n\r\n            const candleSeries = currentOption.series[candleSeriesIndex];\r\n            if (!candleSeries.markLine || !candleSeries.markLine.data || !candleSeries.markLine.data[0]) return;\r\n\r\n            const markLineData = candleSeries.markLine.data[0];\r\n            const currentFormatter = markLineData.label.formatter;\r\n\r\n            // We need to preserve the price formatting logic.\r\n            // But formatter is a function in the option we passed, but ECharts might have stored it?\r\n            // ECharts getOption() returns the merged option. Functions are preserved.\r\n            // We can wrap the formatter or just use the price value.\r\n            // markLineData.yAxis is the price.\r\n\r\n            const price = markLineData.yAxis;\r\n            let priceStr = '';\r\n\r\n            // Re-use formatting logic from options if possible, or simple fix\r\n            if (this.options.yAxisLabelFormatter) {\r\n                priceStr = this.options.yAxisLabelFormatter(price);\r\n            } else {\r\n                const decimals = this.options.yAxisDecimalPlaces !== undefined ? this.options.yAxisDecimalPlaces : 2;\r\n                priceStr = typeof price === 'number' ? price.toFixed(decimals) : price;\r\n            }\r\n\r\n            const labelText = `${priceStr}\\n${timeString}`;\r\n\r\n            // Reconstruct the markLine data to preserve styles (lineStyle, symbol, etc.)\r\n            // We spread markLineData to keep everything (including lineStyle which defines color),\r\n            // then overwrite the label to update the formatter/text.\r\n\r\n            this.chart.setOption({\r\n                series: [\r\n                    {\r\n                        name: this.options.title || 'Market',\r\n                        markLine: {\r\n                            data: [\r\n                                {\r\n                                    ...markLineData, // Preserve lineStyle (color), symbol, yAxis, etc.\r\n                                    label: {\r\n                                        ...markLineData.label, // Preserve existing label styles including backgroundColor\r\n                                        formatter: labelText, // Update only the text\r\n                                    },\r\n                                },\r\n                            ],\r\n                        },\r\n                    },\r\n                ],\r\n            });\r\n        };\r\n\r\n        // Run immediately\r\n        updateLabel();\r\n\r\n        // Start interval\r\n        this.countdownInterval = setInterval(updateLabel, 1000);\r\n    }\r\n\r\n    private stopCountdown() {\r\n        if (this.countdownInterval) {\r\n            clearInterval(this.countdownInterval);\r\n            this.countdownInterval = null;\r\n        }\r\n    }\r\n\r\n    public addIndicator(\r\n        id: string,\r\n        plots: { [name: string]: IndicatorPlot },\r\n        options: {\r\n            overlay?: boolean;\r\n            /** @deprecated Use overlay instead */\r\n            isOverlay?: boolean;\r\n            height?: number;\r\n            titleColor?: string;\r\n            controls?: { collapse?: boolean; maximize?: boolean };\r\n        } = {}\r\n    ): Indicator {\r\n        // Handle backward compatibility: prefer 'overlay' over 'isOverlay'\r\n        const isOverlay = options.overlay !== undefined ? options.overlay : (options.isOverlay ?? false);\r\n        let paneIndex = 0;\r\n        if (!isOverlay) {\r\n            // Find the next available pane index\r\n            // Start from 1, as 0 is the main chart\r\n            let maxPaneIndex = 0;\r\n            this.indicators.forEach((ind) => {\r\n                if (ind.paneIndex > maxPaneIndex) {\r\n                    maxPaneIndex = ind.paneIndex;\r\n                }\r\n            });\r\n            paneIndex = maxPaneIndex + 1;\r\n        }\r\n\r\n        // Create Indicator object\r\n        const indicator = new Indicator(id, plots, paneIndex, {\r\n            height: options.height,\r\n            collapsed: false,\r\n            titleColor: options.titleColor,\r\n            controls: options.controls,\r\n        });\r\n\r\n        this.indicators.set(id, indicator);\r\n        this.render();\r\n        return indicator;\r\n    }\r\n\r\n    /** @deprecated Use addIndicator instead */\r\n    public setIndicator(id: string, plot: IndicatorPlot, isOverlay: boolean = false): void {\r\n        // Wrap single plot into the new structure (backward compatibility)\r\n        this.addIndicator(id, { [id]: plot }, { overlay: isOverlay });\r\n    }\r\n\r\n    public removeIndicator(id: string): void {\r\n        this.indicators.delete(id);\r\n        this.render();\r\n    }\r\n\r\n    public toggleIndicator(id: string, action: 'collapse' | 'maximize' | 'fullscreen' = 'collapse'): void {\r\n        if (action === 'fullscreen') {\r\n            if (document.fullscreenElement) {\r\n                document.exitFullscreen();\r\n            } else {\r\n                this.rootContainer.requestFullscreen();\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (action === 'maximize') {\r\n            if (this.maximizedPaneId === id) {\r\n                // Restore\r\n                this.maximizedPaneId = null;\r\n            } else {\r\n                // Maximize\r\n                this.maximizedPaneId = id;\r\n            }\r\n            this.render();\r\n            return;\r\n        }\r\n\r\n        if (id === 'main') {\r\n            this.isMainCollapsed = !this.isMainCollapsed;\r\n            this.render();\r\n            return;\r\n        }\r\n        const indicator = this.indicators.get(id);\r\n        if (indicator) {\r\n            indicator.toggleCollapse();\r\n            this.render();\r\n        }\r\n    }\r\n\r\n    public resize(): void {\r\n        this.chart.resize();\r\n    }\r\n\r\n    public destroy(): void {\r\n        this.stopCountdown();\r\n        window.removeEventListener('resize', this.resize.bind(this));\r\n        document.removeEventListener('fullscreenchange', this.onFullscreenChange);\r\n        document.removeEventListener('keydown', this.onKeyDown);\r\n        this.pluginManager.deactivatePlugin(); // Cleanup active tool\r\n        this.pluginManager.destroy(); // Cleanup tooltips\r\n        this.chart.dispose();\r\n    }\r\n\r\n    private rebuildTimeIndex(): void {\r\n        this.timeToIndex.clear();\r\n        this.marketData.forEach((k, index) => {\r\n            this.timeToIndex.set(k.time, index);\r\n        });\r\n\r\n        // Update dataIndexOffset whenever data changes\r\n        const dataLength = this.marketData.length;\r\n        const paddingPoints = Math.ceil(dataLength * this.padding);\r\n        this.dataIndexOffset = paddingPoints;\r\n    }\r\n\r\n    private render(): void {\r\n        if (this.marketData.length === 0) return;\r\n\r\n        // Capture current zoom state before rebuilding options\r\n        let currentZoomState: { start: number; end: number } | null = null;\r\n        try {\r\n            const currentOption = this.chart.getOption() as any;\r\n            if (currentOption && currentOption.dataZoom && currentOption.dataZoom.length > 0) {\r\n                // Find the slider or inside zoom component that controls the x-axis\r\n                const zoomComponent = currentOption.dataZoom.find((dz: any) => dz.type === 'slider' || dz.type === 'inside');\r\n                if (zoomComponent) {\r\n                    currentZoomState = {\r\n                        start: zoomComponent.start,\r\n                        end: zoomComponent.end,\r\n                    };\r\n                }\r\n            }\r\n        } catch (e) {\r\n            // Chart might not be initialized yet\r\n        }\r\n\r\n        // --- Sidebar Layout Management ---\r\n        const tooltipPos = this.options.databox?.position; // undefined if not present\r\n        const prevLeftDisplay = this.leftSidebar.style.display;\r\n        const prevRightDisplay = this.rightSidebar.style.display;\r\n\r\n        // If tooltipPos is undefined, we hide both sidebars and don't use them for tooltips.\r\n        // We only show sidebars if position is explicitly 'left' or 'right'.\r\n\r\n        const newLeftDisplay = tooltipPos === 'left' ? 'block' : 'none';\r\n        const newRightDisplay = tooltipPos === 'right' ? 'block' : 'none';\r\n\r\n        // Only resize if visibility changed to avoid unnecessary reflows/resizes\r\n        if (prevLeftDisplay !== newLeftDisplay || prevRightDisplay !== newRightDisplay) {\r\n            this.leftSidebar.style.display = newLeftDisplay;\r\n            this.rightSidebar.style.display = newRightDisplay;\r\n            this.chart.resize();\r\n        }\r\n        // ---------------------------------\r\n\r\n        // Use pre-calculated padding points from rebuildTimeIndex\r\n        const paddingPoints = this.dataIndexOffset;\r\n\r\n        // Create extended category data with empty labels for padding\r\n        const categoryData = [\r\n            ...Array(paddingPoints).fill(''), // Left padding\r\n            ...this.marketData.map((k) => new Date(k.time).toLocaleString()),\r\n            ...Array(paddingPoints).fill(''), // Right padding\r\n        ];\r\n\r\n        // 1. Calculate Layout\r\n        const layout = LayoutManager.calculate(\r\n            this.chart.getHeight(),\r\n            this.indicators,\r\n            this.options,\r\n            this.isMainCollapsed,\r\n            this.maximizedPaneId,\r\n            this.marketData\r\n        );\r\n\r\n        // Convert user-provided dataZoom start/end to account for padding\r\n        // User's start/end refer to real data (0% = start of real data, 100% = end of real data)\r\n        // We need to convert to padded data coordinates\r\n        if (!currentZoomState && layout.dataZoom && this.marketData.length > 0) {\r\n            const realDataLength = this.marketData.length;\r\n            const totalLength = categoryData.length; // includes padding on both sides\r\n            const paddingRatio = paddingPoints / totalLength;\r\n            const dataRatio = realDataLength / totalLength;\r\n\r\n            layout.dataZoom.forEach((dz) => {\r\n                // Convert user's start/end (0-100 referring to real data) to actual start/end (0-100 referring to padded data)\r\n                if (dz.start !== undefined) {\r\n                    // User's start% of real data -> actual position in padded data\r\n                    const userStartFraction = dz.start / 100;\r\n                    const actualStartFraction = paddingRatio + userStartFraction * dataRatio;\r\n                    dz.start = actualStartFraction * 100;\r\n                }\r\n                if (dz.end !== undefined) {\r\n                    // User's end% of real data -> actual position in padded data\r\n                    const userEndFraction = dz.end / 100;\r\n                    const actualEndFraction = paddingRatio + userEndFraction * dataRatio;\r\n                    dz.end = actualEndFraction * 100;\r\n                }\r\n            });\r\n        }\r\n\r\n        // Apply preserved zoom state if available (this overrides the conversion above)\r\n        if (currentZoomState && layout.dataZoom) {\r\n            layout.dataZoom.forEach((dz) => {\r\n                dz.start = currentZoomState!.start;\r\n                dz.end = currentZoomState!.end;\r\n            });\r\n        }\r\n\r\n        // Patch X-Axis with extended data\r\n        layout.xAxis.forEach((axis) => {\r\n            axis.data = categoryData;\r\n            axis.boundaryGap = false; // No additional gap needed, we have phantom data\r\n        });\r\n\r\n        // 2. Build Series with phantom data padding\r\n        const candlestickSeries = SeriesBuilder.buildCandlestickSeries(this.marketData, this.options);\r\n        // Extend candlestick data with empty objects (not null) to avoid rendering errors\r\n        const emptyCandle = { value: [NaN, NaN, NaN, NaN], itemStyle: { opacity: 0 } };\r\n        candlestickSeries.data = [...Array(paddingPoints).fill(emptyCandle), ...candlestickSeries.data, ...Array(paddingPoints).fill(emptyCandle)];\r\n\r\n        // Build array of OHLCV aligned with indices for shape positioning\r\n        const paddedOHLCVForShapes = [...Array(paddingPoints).fill(null), ...this.marketData, ...Array(paddingPoints).fill(null)];\r\n\r\n        const { series: indicatorSeries, barColors } = SeriesBuilder.buildIndicatorSeries(\r\n            this.indicators,\r\n            this.timeToIndex,\r\n            layout.paneLayout,\r\n            categoryData.length,\r\n            paddingPoints,\r\n            paddedOHLCVForShapes, // Pass padded OHLCV\r\n            layout.overlayYAxisMap, // Pass overlay Y-axis mapping\r\n            layout.separatePaneYAxisOffset // Pass Y-axis offset for separate panes\r\n        );\r\n\r\n        // Apply barColors to candlestick data\r\n        candlestickSeries.data = candlestickSeries.data.map((candle: any, i: number) => {\r\n            if (barColors[i]) {\r\n                return {\r\n                    value: candle.value || candle,\r\n                    itemStyle: {\r\n                        color: barColors[i],\r\n                        color0: barColors[i],\r\n                        borderColor: barColors[i],\r\n                        borderColor0: barColors[i],\r\n                    },\r\n                };\r\n            }\r\n            return candle;\r\n        });\r\n\r\n        // 3. Build Graphics\r\n        const graphic = GraphicBuilder.build(layout, this.options, this.toggleIndicator.bind(this), this.isMainCollapsed, this.maximizedPaneId);\r\n\r\n        // 4. Build Drawings Series (One Custom Series per Pane used)\r\n        const drawingsByPane = new Map<number, import('./types').DrawingElement[]>();\r\n        this.drawings.forEach((d) => {\r\n            const paneIdx = d.paneIndex || 0;\r\n            if (!drawingsByPane.has(paneIdx)) {\r\n                drawingsByPane.set(paneIdx, []);\r\n            }\r\n            drawingsByPane.get(paneIdx)!.push(d);\r\n        });\r\n\r\n        const drawingSeriesList: any[] = [];\r\n        drawingsByPane.forEach((drawings, paneIndex) => {\r\n            drawingSeriesList.push({\r\n                type: 'custom',\r\n                name: `drawings-pane-${paneIndex}`,\r\n                xAxisIndex: paneIndex,\r\n                yAxisIndex: paneIndex,\r\n                clip: true,\r\n                renderItem: (params: any, api: any) => {\r\n                    const drawing = drawings[params.dataIndex];\r\n                    if (!drawing) return;\r\n\r\n                    const start = drawing.points[0];\r\n                    const end = drawing.points[1];\r\n\r\n                    if (!start || !end) return;\r\n\r\n                    // Coordinates are already in padded space, use directly\r\n                    const p1 = api.coord([start.timeIndex, start.value]);\r\n                    const p2 = api.coord([end.timeIndex, end.value]);\r\n\r\n                    const isSelected = drawing.id === this.selectedDrawingId;\r\n\r\n                    if (drawing.type === 'line') {\r\n                        return {\r\n                            type: 'group',\r\n                            children: [\r\n                                {\r\n                                    type: 'line',\r\n                                    name: 'line',\r\n                                    shape: {\r\n                                        x1: p1[0],\r\n                                        y1: p1[1],\r\n                                        x2: p2[0],\r\n                                        y2: p2[1],\r\n                                    },\r\n                                    style: {\r\n                                        stroke: drawing.style?.color || '#3b82f6',\r\n                                        lineWidth: drawing.style?.lineWidth || 2,\r\n                                    },\r\n                                },\r\n                                {\r\n                                    type: 'circle',\r\n                                    name: 'point-start',\r\n                                    shape: { cx: p1[0], cy: p1[1], r: 4 },\r\n                                    style: {\r\n                                        fill: '#fff',\r\n                                        stroke: drawing.style?.color || '#3b82f6',\r\n                                        lineWidth: 1,\r\n                                        opacity: isSelected ? 1 : 0, // Show if selected\r\n                                    },\r\n                                },\r\n                                {\r\n                                    type: 'circle',\r\n                                    name: 'point-end',\r\n                                    shape: { cx: p2[0], cy: p2[1], r: 4 },\r\n                                    style: {\r\n                                        fill: '#fff',\r\n                                        stroke: drawing.style?.color || '#3b82f6',\r\n                                        lineWidth: 1,\r\n                                        opacity: isSelected ? 1 : 0, // Show if selected\r\n                                    },\r\n                                },\r\n                            ],\r\n                        };\r\n                    } else if (drawing.type === 'fibonacci') {\r\n                        const x1 = p1[0];\r\n                        const y1 = p1[1];\r\n                        const x2 = p2[0];\r\n                        const y2 = p2[1];\r\n\r\n                        const startX = Math.min(x1, x2);\r\n                        const endX = Math.max(x1, x2);\r\n                        const width = endX - startX;\r\n                        const diffY = y2 - y1;\r\n\r\n                        const levels = [0, 0.236, 0.382, 0.5, 0.618, 0.786, 1];\r\n                        const colors = ['#787b86', '#f44336', '#ff9800', '#4caf50', '#2196f3', '#00bcd4', '#787b86'];\r\n\r\n                        const children: any[] = [];\r\n\r\n                        // 1. Diagonal Line\r\n                        children.push({\r\n                            type: 'line',\r\n                            name: 'line', // Use 'line' name to enable dragging logic in DrawingEditor\r\n                            shape: { x1, y1, x2, y2 },\r\n                            style: {\r\n                                stroke: '#999',\r\n                                lineWidth: 1,\r\n                                lineDash: [4, 4],\r\n                            },\r\n                        });\r\n\r\n                        // 2. Control Points (invisible by default)\r\n                        children.push({\r\n                            type: 'circle',\r\n                            name: 'point-start',\r\n                            shape: { cx: x1, cy: y1, r: 4 },\r\n                            style: {\r\n                                fill: '#fff',\r\n                                stroke: drawing.style?.color || '#3b82f6',\r\n                                lineWidth: 1,\r\n                                opacity: isSelected ? 1 : 0,\r\n                            },\r\n                            z: 100, // Ensure on top\r\n                        });\r\n                        children.push({\r\n                            type: 'circle',\r\n                            name: 'point-end',\r\n                            shape: { cx: x2, cy: y2, r: 4 },\r\n                            style: {\r\n                                fill: '#fff',\r\n                                stroke: drawing.style?.color || '#3b82f6',\r\n                                lineWidth: 1,\r\n                                opacity: isSelected ? 1 : 0,\r\n                            },\r\n                            z: 100,\r\n                        });\r\n\r\n                        // 3. Levels and Backgrounds\r\n                        levels.forEach((level, index) => {\r\n                            const levelY = y2 - diffY * level;\r\n                            const color = colors[index % colors.length];\r\n\r\n                            // Horizontal Line\r\n                            children.push({\r\n                                type: 'line',\r\n                                name: 'fib-line', // distinct name, maybe we don't want to drag by clicking these lines? or yes? 'line' triggers drag. 'fib-line' won't unless we update logic.\r\n                                // The user asked for \"fib levels between start and end\".\r\n                                shape: { x1: startX, y1: levelY, x2: endX, y2: levelY },\r\n                                style: { stroke: color, lineWidth: 1 },\r\n                                silent: true, // Make internal lines silent so clicks pass to background/diagonal?\r\n                            });\r\n\r\n                            const startVal = drawing.points[0].value;\r\n                            const endVal = drawing.points[1].value;\r\n                            const valDiff = endVal - startVal;\r\n                            const price = endVal - valDiff * level;\r\n\r\n                            children.push({\r\n                                type: 'text',\r\n                                style: {\r\n                                    text: `${level} (${price.toFixed(2)})`,\r\n                                    x: startX + 5,\r\n                                    y: levelY - 10,\r\n                                    fill: color,\r\n                                    fontSize: 10,\r\n                                },\r\n                                silent: true,\r\n                            });\r\n\r\n                            // Background\r\n                            if (index < levels.length - 1) {\r\n                                const nextLevel = levels[index + 1];\r\n                                const nextY = y2 - diffY * nextLevel;\r\n                                const rectH = Math.abs(nextY - levelY);\r\n                                const rectY = Math.min(levelY, nextY);\r\n\r\n                                children.push({\r\n                                    type: 'rect',\r\n                                    shape: { x: startX, y: rectY, width, height: rectH },\r\n                                    style: {\r\n                                        fill: colors[(index + 1) % colors.length],\r\n                                        opacity: 0.1,\r\n                                    },\r\n                                    silent: true, // Let clicks pass through?\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        const backgrounds: any[] = [];\r\n                        const linesAndText: any[] = [];\r\n\r\n                        levels.forEach((level, index) => {\r\n                            const levelY = y2 - diffY * level;\r\n                            const color = colors[index % colors.length];\r\n\r\n                            linesAndText.push({\r\n                                type: 'line',\r\n                                shape: { x1: startX, y1: levelY, x2: endX, y2: levelY },\r\n                                style: { stroke: color, lineWidth: 1 },\r\n                                silent: true,\r\n                            });\r\n\r\n                            const startVal = drawing.points[0].value;\r\n                            const endVal = drawing.points[1].value;\r\n                            const valDiff = endVal - startVal;\r\n                            const price = endVal - valDiff * level;\r\n\r\n                            linesAndText.push({\r\n                                type: 'text',\r\n                                style: {\r\n                                    text: `${level} (${price.toFixed(2)})`,\r\n                                    x: startX + 5,\r\n                                    y: levelY - 10,\r\n                                    fill: color,\r\n                                    fontSize: 10,\r\n                                },\r\n                                silent: true,\r\n                            });\r\n\r\n                            if (index < levels.length - 1) {\r\n                                const nextLevel = levels[index + 1];\r\n                                const nextY = y2 - diffY * nextLevel;\r\n                                const rectH = Math.abs(nextY - levelY);\r\n                                const rectY = Math.min(levelY, nextY);\r\n\r\n                                backgrounds.push({\r\n                                    type: 'rect',\r\n                                    name: 'line', // Enable dragging by clicking background!\r\n                                    shape: { x: startX, y: rectY, width, height: rectH },\r\n                                    style: {\r\n                                        fill: colors[(index + 1) % colors.length],\r\n                                        opacity: 0.1,\r\n                                    },\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        return {\r\n                            type: 'group',\r\n                            children: [\r\n                                ...backgrounds,\r\n                                ...linesAndText,\r\n                                {\r\n                                    type: 'line',\r\n                                    name: 'line',\r\n                                    shape: { x1, y1, x2, y2 },\r\n                                    style: { stroke: '#999', lineWidth: 1, lineDash: [4, 4] },\r\n                                },\r\n                                {\r\n                                    type: 'circle',\r\n                                    name: 'point-start',\r\n                                    shape: { cx: x1, cy: y1, r: 4 },\r\n                                    style: {\r\n                                        fill: '#fff',\r\n                                        stroke: drawing.style?.color || '#3b82f6',\r\n                                        lineWidth: 1,\r\n                                        opacity: isSelected ? 1 : 0,\r\n                                    },\r\n                                    z: 100,\r\n                                },\r\n                                {\r\n                                    type: 'circle',\r\n                                    name: 'point-end',\r\n                                    shape: { cx: x2, cy: y2, r: 4 },\r\n                                    style: {\r\n                                        fill: '#fff',\r\n                                        stroke: drawing.style?.color || '#3b82f6',\r\n                                        lineWidth: 1,\r\n                                        opacity: isSelected ? 1 : 0,\r\n                                    },\r\n                                    z: 100,\r\n                                },\r\n                            ],\r\n                        };\r\n                    }\r\n                },\r\n                data: drawings.map((d) => [d.points[0].timeIndex, d.points[0].value, d.points[1].timeIndex, d.points[1].value]),\r\n                z: 100,\r\n                silent: false,\r\n            });\r\n        });\r\n\r\n        // 5. Tooltip Formatter\r\n        const tooltipFormatter = (params: any[]) => {\r\n            const html = TooltipFormatter.format(params, this.options);\r\n            const mode = this.options.databox?.position; // undefined if not present\r\n\r\n            if (mode === 'left') {\r\n                this.leftSidebar.innerHTML = html;\r\n                return ''; // Hide tooltip box\r\n            }\r\n            if (mode === 'right') {\r\n                this.rightSidebar.innerHTML = html;\r\n                return ''; // Hide tooltip box\r\n            }\r\n\r\n            if (!this.options.databox) {\r\n                return ''; // No tooltip content\r\n            }\r\n\r\n            // Default to floating if databox exists but position is 'floating' (or unspecified but object exists)\r\n            return `<div style=\"min-width: 200px;\">${html}</div>`;\r\n        };\r\n\r\n        const option: any = {\r\n            backgroundColor: this.options.backgroundColor,\r\n            animation: false,\r\n            legend: {\r\n                show: false, // Hide default legend as we use tooltip\r\n            },\r\n            tooltip: {\r\n                show: true,\r\n                showContent: !!this.options.databox, // Show content only if databox is present\r\n                trigger: 'axis',\r\n                triggerOn: this.options.databox?.triggerOn ?? 'mousemove', // Control when to show tooltip/crosshair\r\n                axisPointer: { type: 'cross', label: { backgroundColor: '#475569' } },\r\n                backgroundColor: 'rgba(30, 41, 59, 0.9)',\r\n                borderWidth: 1,\r\n                borderColor: '#334155',\r\n                padding: 10,\r\n                textStyle: {\r\n                    color: '#fff',\r\n                    fontFamily: this.options.fontFamily || 'sans-serif',\r\n                },\r\n                formatter: tooltipFormatter,\r\n                extraCssText: tooltipPos !== 'floating' && tooltipPos !== undefined ? 'display: none !important;' : undefined,\r\n                position: (pos: any, params: any, el: any, elRect: any, size: any) => {\r\n                    const mode = this.options.databox?.position;\r\n                    if (mode === 'floating') {\r\n                        const obj = { top: 10 };\r\n                        obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)] as keyof typeof obj] = 30;\r\n                        return obj;\r\n                    }\r\n                    return null;\r\n                },\r\n            },\r\n            axisPointer: {\r\n                link: { xAxisIndex: 'all' },\r\n                label: { backgroundColor: '#475569' },\r\n            },\r\n            graphic: graphic,\r\n            grid: layout.grid,\r\n            xAxis: layout.xAxis,\r\n            yAxis: layout.yAxis,\r\n            dataZoom: layout.dataZoom,\r\n            series: [candlestickSeries, ...indicatorSeries, ...drawingSeriesList],\r\n        };\r\n\r\n        this.chart.setOption(option, true); // true = not merge, replace.\r\n    }\r\n}\r\n","import { ChartContext, Plugin, PluginConfig, OHLCV } from \"../types\";\r\nimport { EventType, EventHandler } from \"../utils/EventBus\";\r\n\r\nexport abstract class AbstractPlugin implements Plugin {\r\n  public id: string;\r\n  public name?: string;\r\n  public icon?: string;\r\n\r\n  protected context!: ChartContext;\r\n  private eventListeners: Array<{ event: EventType; handler: EventHandler }> =\r\n    [];\r\n\r\n  constructor(config: PluginConfig) {\r\n    this.id = config.id;\r\n    this.name = config.name;\r\n    this.icon = config.icon;\r\n  }\r\n\r\n  public init(context: ChartContext): void {\r\n    this.context = context;\r\n    this.onInit();\r\n  }\r\n\r\n  /**\r\n   * Lifecycle hook called after context is initialized.\r\n   * Override this instead of init().\r\n   */\r\n  protected onInit(): void {}\r\n\r\n  public activate(): void {\r\n    this.onActivate();\r\n    this.context.events.emit(\"plugin:activated\", this.id);\r\n  }\r\n\r\n  /**\r\n   * Lifecycle hook called when the plugin is activated.\r\n   */\r\n  protected onActivate(): void {}\r\n\r\n  public deactivate(): void {\r\n    this.onDeactivate();\r\n    this.context.events.emit(\"plugin:deactivated\", this.id);\r\n  }\r\n\r\n  /**\r\n   * Lifecycle hook called when the plugin is deactivated.\r\n   */\r\n  protected onDeactivate(): void {}\r\n\r\n  public destroy(): void {\r\n    this.removeAllListeners();\r\n    this.onDestroy();\r\n  }\r\n\r\n  /**\r\n   * Lifecycle hook called when the plugin is destroyed.\r\n   */\r\n  protected onDestroy(): void {}\r\n\r\n  // --- Helper Methods ---\r\n\r\n  /**\r\n   * Register an event listener that will be automatically cleaned up on destroy.\r\n   */\r\n  protected on(event: EventType, handler: EventHandler): void {\r\n    this.context.events.on(event, handler);\r\n    this.eventListeners.push({ event, handler });\r\n  }\r\n\r\n  /**\r\n   * Remove a specific event listener.\r\n   */\r\n  protected off(event: EventType, handler: EventHandler): void {\r\n    this.context.events.off(event, handler);\r\n    this.eventListeners = this.eventListeners.filter(\r\n      (l) => l.event !== event || l.handler !== handler\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Remove all listeners registered by this plugin.\r\n   */\r\n  protected removeAllListeners(): void {\r\n    this.eventListeners.forEach(({ event, handler }) => {\r\n      this.context.events.off(event, handler);\r\n    });\r\n    this.eventListeners = [];\r\n  }\r\n\r\n  /**\r\n   * Access to the ECharts instance.\r\n   */\r\n  protected get chart() {\r\n    return this.context.getChart();\r\n  }\r\n\r\n  /**\r\n   * Access to market data.\r\n   */\r\n  protected get marketData(): OHLCV[] {\r\n    return this.context.getMarketData();\r\n  }\r\n}\r\n\r\n","import { ChartContext, PluginConfig } from '../types';\r\nimport { AbstractPlugin } from '../components/AbstractPlugin';\r\nimport * as echarts from 'echarts';\r\n\r\ntype PluginState = 'idle' | 'drawing' | 'finished';\r\n\r\nexport class MeasureTool extends AbstractPlugin {\r\n    private zr!: any;\r\n\r\n    private state: PluginState = 'idle';\r\n\r\n    private startPoint: number[] | null = null;\r\n    private endPoint: number[] | null = null;\r\n\r\n    // ZRender Elements\r\n    private group: any = null;\r\n    private rect: any = null; // Measurement Box\r\n    private labelRect: any = null; // Label Background\r\n    private labelText: any = null; // Label Text\r\n    private lineV: any = null; // Vertical Arrow Line\r\n    private lineH: any = null; // Horizontal Arrow Line\r\n    private arrowStart: any = null; // Start Arrow\r\n    private arrowEnd: any = null; // End Arrow\r\n\r\n    constructor(options: { name?: string; icon?: string }) {\r\n        super({\r\n            id: 'measure',\r\n            name: options?.name || 'Measure',\r\n            icon:\r\n                options?.icon ||\r\n                `<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#e3e3e3\"><path d=\"M160-240q-33 0-56.5-23.5T80-320v-320q0-33 23.5-56.5T160-720h640q33 0 56.5 23.5T880-640v320q0 33-23.5 56.5T800-240H160Zm0-80h640v-320H680v160h-80v-160h-80v160h-80v-160h-80v160h-80v-160H160v320Zm120-160h80-80Zm160 0h80-80Zm160 0h80-80Zm-120 0Z\"/></svg>`,\r\n        });\r\n    }\r\n\r\n    protected onInit(): void {\r\n        this.zr = this.chart.getZr();\r\n    }\r\n\r\n    protected onActivate(): void {\r\n        this.state = 'idle';\r\n        this.chart.getZr().setCursorStyle('crosshair');\r\n\r\n        // We can use this.on() to register listeners that will be cleaned up automatically on destroy\r\n        // BUT we need manual control over add/remove for deactivate() logic.\r\n        // AbstractPlugin.on() is for lifecycle-bound listeners.\r\n        // Here we toggle listeners based on tool state.\r\n        // So we'll use ZRender direct listeners as before, but maybe cleaner.\r\n\r\n        this.zr.on('click', this.onClick);\r\n        this.zr.on('mousemove', this.onMouseMove);\r\n\r\n        // We can still use the Event Bus for internal communication if needed\r\n    }\r\n\r\n    protected onDeactivate(): void {\r\n        this.state = 'idle';\r\n        this.chart.getZr().setCursorStyle('default');\r\n\r\n        this.zr.off('click', this.onClick);\r\n        this.zr.off('mousemove', this.onMouseMove);\r\n\r\n        // Clean up clear listeners if any\r\n        this.disableClearListeners();\r\n\r\n        // @ts-ignore - state type comparison\r\n        if (this.state === 'drawing') {\r\n            this.removeGraphic();\r\n        }\r\n    }\r\n\r\n    protected onDestroy(): void {\r\n        this.removeGraphic();\r\n    }\r\n\r\n    // --- Interaction Handlers ---\r\n\r\n    private onMouseDown = () => {\r\n        if (this.state === 'finished') {\r\n            this.removeGraphic();\r\n        }\r\n    };\r\n\r\n    private onChartInteraction = () => {\r\n        if (this.group) {\r\n            this.removeGraphic();\r\n        }\r\n    };\r\n\r\n    private onClick = (params: any) => {\r\n        if (this.state === 'idle') {\r\n            this.state = 'drawing';\r\n            this.startPoint = [params.offsetX, params.offsetY];\r\n            this.endPoint = [params.offsetX, params.offsetY];\r\n            this.initGraphic();\r\n            this.updateGraphic();\r\n        } else if (this.state === 'drawing') {\r\n            this.state = 'finished';\r\n            this.endPoint = [params.offsetX, params.offsetY];\r\n            this.updateGraphic();\r\n            this.context.disableTools();\r\n\r\n            // Enable listeners to clear the graphic on interaction\r\n            this.enableClearListeners();\r\n        }\r\n    };\r\n\r\n    private enableClearListeners(): void {\r\n        const clickHandler = () => {\r\n            this.removeGraphic();\r\n        };\r\n        setTimeout(() => {\r\n            this.zr.on('click', clickHandler);\r\n        }, 10);\r\n\r\n        this.zr.on('mousedown', this.onMouseDown);\r\n        this.context.events.on('chart:dataZoom', this.onChartInteraction);\r\n\r\n        this.clearHandlers = {\r\n            click: clickHandler,\r\n            mousedown: this.onMouseDown,\r\n            dataZoom: this.onChartInteraction,\r\n        };\r\n    }\r\n\r\n    private clearHandlers: any = {};\r\n\r\n    private disableClearListeners(): void {\r\n        if (this.clearHandlers.click) this.zr.off('click', this.clearHandlers.click);\r\n        if (this.clearHandlers.mousedown) this.zr.off('mousedown', this.clearHandlers.mousedown);\r\n        if (this.clearHandlers.dataZoom) {\r\n            this.context.events.off('chart:dataZoom', this.clearHandlers.dataZoom);\r\n        }\r\n        this.clearHandlers = {};\r\n    }\r\n\r\n    private onMouseMove = (params: any) => {\r\n        if (this.state !== 'drawing') return;\r\n        this.endPoint = [params.offsetX, params.offsetY];\r\n        this.updateGraphic();\r\n    };\r\n\r\n    // --- Graphics ---\r\n\r\n    private initGraphic(): void {\r\n        if (this.group) return;\r\n\r\n        this.group = new echarts.graphic.Group();\r\n\r\n        // 1. Rectangle (Box)\r\n        this.rect = new echarts.graphic.Rect({\r\n            shape: { x: 0, y: 0, width: 0, height: 0 },\r\n            style: { fill: 'rgba(0,0,0,0)', stroke: 'transparent', lineWidth: 0 },\r\n            z: 100,\r\n        });\r\n\r\n        // 2. Lines (Arrows)\r\n        this.lineV = new echarts.graphic.Line({\r\n            shape: { x1: 0, y1: 0, x2: 0, y2: 0 },\r\n            style: { stroke: '#fff', lineWidth: 1, lineDash: [4, 4] },\r\n            z: 101,\r\n        });\r\n        this.lineH = new echarts.graphic.Line({\r\n            shape: { x1: 0, y1: 0, x2: 0, y2: 0 },\r\n            style: { stroke: '#fff', lineWidth: 1, lineDash: [4, 4] },\r\n            z: 101,\r\n        });\r\n\r\n        // Arrows\r\n        this.arrowStart = new echarts.graphic.Polygon({\r\n            shape: {\r\n                points: [\r\n                    [0, 0],\r\n                    [-5, 10],\r\n                    [5, 10],\r\n                ],\r\n            },\r\n            style: { fill: '#fff' },\r\n            z: 102,\r\n        });\r\n        this.arrowEnd = new echarts.graphic.Polygon({\r\n            shape: {\r\n                points: [\r\n                    [0, 0],\r\n                    [-5, -10],\r\n                    [5, -10],\r\n                ],\r\n            },\r\n            style: { fill: '#fff' },\r\n            z: 102,\r\n        });\r\n\r\n        // 3. Label\r\n        this.labelRect = new echarts.graphic.Rect({\r\n            shape: { x: 0, y: 0, width: 0, height: 0, r: 4 },\r\n            style: {\r\n                fill: 'transparent',\r\n                stroke: 'transparent',\r\n                lineWidth: 0,\r\n                shadowBlur: 5,\r\n                shadowColor: 'rgba(0,0,0,0.3)',\r\n            },\r\n            z: 102,\r\n        });\r\n\r\n        this.labelText = new echarts.graphic.Text({\r\n            style: {\r\n                x: 0,\r\n                y: 0,\r\n                text: '',\r\n                fill: '#fff',\r\n                font: '12px sans-serif',\r\n                align: 'center',\r\n                verticalAlign: 'middle',\r\n            },\r\n            z: 103,\r\n        });\r\n\r\n        this.group.add(this.rect);\r\n        this.group.add(this.lineV);\r\n        this.group.add(this.lineH);\r\n        this.group.add(this.arrowStart);\r\n        this.group.add(this.arrowEnd);\r\n        this.group.add(this.labelRect);\r\n        this.group.add(this.labelText);\r\n\r\n        this.zr.add(this.group);\r\n    }\r\n\r\n    private removeGraphic(): void {\r\n        if (this.group) {\r\n            this.zr.remove(this.group);\r\n            this.group = null;\r\n            // ... clear refs\r\n            this.disableClearListeners();\r\n        }\r\n    }\r\n\r\n    private updateGraphic(): void {\r\n        if (!this.startPoint || !this.endPoint || !this.group) return;\r\n\r\n        const [x1, y1] = this.startPoint;\r\n        const [x2, y2] = this.endPoint;\r\n\r\n        // Use Context Helper\r\n        const p1 = this.context.coordinateConversion.pixelToData({ x: x1, y: y1 });\r\n        const p2 = this.context.coordinateConversion.pixelToData({ x: x2, y: y2 });\r\n\r\n        if (!p1 || !p2) return;\r\n\r\n        const idx1 = Math.round(p1.timeIndex);\r\n        const idx2 = Math.round(p2.timeIndex);\r\n        const val1 = p1.value;\r\n        const val2 = p2.value;\r\n\r\n        const bars = idx2 - idx1;\r\n        const priceDiff = val2 - val1;\r\n        const priceChangePercent = (priceDiff / val1) * 100;\r\n        const isUp = priceDiff >= 0;\r\n\r\n        const color = isUp ? 'rgba(33, 150, 243, 0.2)' : 'rgba(236, 0, 0, 0.2)';\r\n        const strokeColor = isUp ? '#2196F3' : '#ec0000';\r\n\r\n        // --- Visuals ---\r\n        this.rect.setShape({\r\n            x: Math.min(x1, x2),\r\n            y: Math.min(y1, y2),\r\n            width: Math.abs(x2 - x1),\r\n            height: Math.abs(y2 - y1),\r\n        });\r\n        this.rect.setStyle({ fill: color });\r\n\r\n        const midX = (x1 + x2) / 2;\r\n        const midY = (y1 + y2) / 2;\r\n\r\n        this.lineV.setShape({ x1: midX, y1: y1, x2: midX, y2: y2 });\r\n        this.lineV.setStyle({ stroke: strokeColor });\r\n\r\n        this.lineH.setShape({ x1: x1, y1: midY, x2: x2, y2: midY });\r\n        this.lineH.setStyle({ stroke: strokeColor });\r\n\r\n        // Arrows\r\n        const topY = Math.min(y1, y2);\r\n        const bottomY = Math.max(y1, y2);\r\n\r\n        this.arrowStart.setStyle({ fill: 'none' });\r\n        this.arrowEnd.setStyle({ fill: 'none' });\r\n\r\n        if (isUp) {\r\n            this.arrowStart.setShape({\r\n                points: [\r\n                    [midX, topY],\r\n                    [midX - 4, topY + 6],\r\n                    [midX + 4, topY + 6],\r\n                ],\r\n            });\r\n            this.arrowStart.setStyle({ fill: strokeColor });\r\n        } else {\r\n            this.arrowEnd.setShape({\r\n                points: [\r\n                    [midX, bottomY],\r\n                    [midX - 4, bottomY - 6],\r\n                    [midX + 4, bottomY - 6],\r\n                ],\r\n            });\r\n            this.arrowEnd.setStyle({ fill: strokeColor });\r\n        }\r\n\r\n        // Label\r\n        const textContent = [`${priceDiff.toFixed(2)} (${priceChangePercent.toFixed(2)}%)`, `${bars} bars, ${(bars * 0).toFixed(0)}d`].join('\\n');\r\n\r\n        const labelW = 140;\r\n        const labelH = 40;\r\n        const rectBottomY = Math.max(y1, y2);\r\n        const rectTopY = Math.min(y1, y2);\r\n        const rectCenterX = (x1 + x2) / 2;\r\n\r\n        let labelX = rectCenterX - labelW / 2;\r\n        let labelY = rectBottomY + 10;\r\n\r\n        const canvasHeight = this.chart.getHeight();\r\n        if (labelY + labelH > canvasHeight) {\r\n            labelY = rectTopY - labelH - 10;\r\n        }\r\n\r\n        this.labelRect.setShape({\r\n            x: labelX,\r\n            y: labelY,\r\n            width: labelW,\r\n            height: labelH,\r\n        });\r\n        this.labelRect.setStyle({\r\n            fill: '#1e293b',\r\n            stroke: strokeColor,\r\n            lineWidth: 1,\r\n        });\r\n\r\n        this.labelText.setStyle({\r\n            x: labelX + labelW / 2,\r\n            y: labelY + labelH / 2,\r\n            text: textContent,\r\n            fill: '#fff',\r\n        });\r\n    }\r\n}\r\n","import { AbstractPlugin } from '../components/AbstractPlugin';\r\nimport * as echarts from 'echarts';\r\n\r\ntype PluginState = 'idle' | 'drawing' | 'finished';\r\n\r\nexport class LineTool extends AbstractPlugin {\r\n    private zr!: any;\r\n    private state: PluginState = 'idle';\r\n    private startPoint: number[] | null = null;\r\n    private endPoint: number[] | null = null;\r\n\r\n    // ZRender Elements\r\n    private group: any = null;\r\n    private line: any = null;\r\n    private startCircle: any = null;\r\n    private endCircle: any = null;\r\n\r\n    constructor(options: { name?: string; icon?: string }) {\r\n        super({\r\n            id: 'trend-line',\r\n            name: options?.name || 'Trend Line',\r\n            icon:\r\n                options?.icon ||\r\n                `<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><line x1=\"2\" y1=\"22\" x2=\"22\" y2=\"2\" /></svg>`,\r\n        });\r\n    }\r\n\r\n    protected onInit(): void {\r\n        this.zr = this.chart.getZr();\r\n    }\r\n\r\n    protected onActivate(): void {\r\n        this.state = 'idle';\r\n        this.chart.getZr().setCursorStyle('crosshair');\r\n\r\n        this.zr.on('click', this.onClick);\r\n        this.zr.on('mousemove', this.onMouseMove);\r\n    }\r\n\r\n    protected onDeactivate(): void {\r\n        this.state = 'idle';\r\n        this.chart.getZr().setCursorStyle('default');\r\n\r\n        this.zr.off('click', this.onClick);\r\n        this.zr.off('mousemove', this.onMouseMove);\r\n\r\n        // Clean up clear listeners\r\n        this.disableClearListeners();\r\n\r\n        // @ts-ignore - state type comparison\r\n        if (this.state === 'drawing') {\r\n            this.removeGraphic();\r\n        }\r\n    }\r\n\r\n    protected onDestroy(): void {\r\n        this.removeGraphic();\r\n    }\r\n\r\n    // --- Interaction Handlers ---\r\n\r\n    private onMouseDown = () => {\r\n        // No longer needed\r\n    };\r\n\r\n    private onChartInteraction = () => {\r\n        // No longer needed\r\n    };\r\n\r\n    private onClick = (params: any) => {\r\n        if (this.state === 'idle') {\r\n            this.state = 'drawing';\r\n            this.startPoint = [params.offsetX, params.offsetY];\r\n            this.endPoint = [params.offsetX, params.offsetY];\r\n            this.initGraphic();\r\n            this.updateGraphic();\r\n        } else if (this.state === 'drawing') {\r\n            this.state = 'finished';\r\n            this.endPoint = [params.offsetX, params.offsetY];\r\n            this.updateGraphic();\r\n\r\n            // Convert to native chart drawing\r\n            if (this.startPoint && this.endPoint) {\r\n                const start = this.context.coordinateConversion.pixelToData({\r\n                    x: this.startPoint[0],\r\n                    y: this.startPoint[1],\r\n                });\r\n                const end = this.context.coordinateConversion.pixelToData({\r\n                    x: this.endPoint[0],\r\n                    y: this.endPoint[1],\r\n                });\r\n\r\n                if (start && end) {\r\n                    // Use the pane index from the start point (assume drawing starts and ends in same pane or use start pane)\r\n                    const paneIndex = start.paneIndex || 0;\r\n\r\n                    this.context.addDrawing({\r\n                        id: `line-${Date.now()}`,\r\n                        type: 'line',\r\n                        points: [start, end],\r\n                        paneIndex: paneIndex,\r\n                        style: {\r\n                            color: '#3b82f6',\r\n                            lineWidth: 2,\r\n                        },\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Cleanup local ZRender graphic as it's now part of the chart series\r\n            this.removeGraphic();\r\n            this.context.disableTools();\r\n        }\r\n    };\r\n\r\n    private saveDataCoordinates() {\r\n        // No longer needed\r\n    }\r\n\r\n    private updateGraphicFromData() {\r\n        // No longer needed\r\n    }\r\n\r\n    private enableClearListeners(): void {\r\n        // No longer needed\r\n    }\r\n\r\n    private clearHandlers: any = {};\r\n\r\n    private disableClearListeners(): void {\r\n        // No longer needed\r\n    }\r\n\r\n    private onMouseMove = (params: any) => {\r\n        if (this.state !== 'drawing') return;\r\n        this.endPoint = [params.offsetX, params.offsetY];\r\n        this.updateGraphic();\r\n    };\r\n\r\n    // --- Graphics ---\r\n\r\n    private initGraphic(): void {\r\n        if (this.group) return;\r\n\r\n        this.group = new echarts.graphic.Group();\r\n\r\n        this.line = new echarts.graphic.Line({\r\n            shape: { x1: 0, y1: 0, x2: 0, y2: 0 },\r\n            style: { stroke: '#3b82f6', lineWidth: 2 },\r\n            z: 100,\r\n        });\r\n\r\n        this.startCircle = new echarts.graphic.Circle({\r\n            shape: { cx: 0, cy: 0, r: 4 },\r\n            style: { fill: '#fff', stroke: '#3b82f6', lineWidth: 1 },\r\n            z: 101,\r\n        });\r\n\r\n        this.endCircle = new echarts.graphic.Circle({\r\n            shape: { cx: 0, cy: 0, r: 4 },\r\n            style: { fill: '#fff', stroke: '#3b82f6', lineWidth: 1 },\r\n            z: 101,\r\n        });\r\n\r\n        this.group.add(this.line);\r\n        this.group.add(this.startCircle);\r\n        this.group.add(this.endCircle);\r\n\r\n        this.zr.add(this.group);\r\n    }\r\n\r\n    private removeGraphic(): void {\r\n        if (this.group) {\r\n            this.zr.remove(this.group);\r\n            this.group = null;\r\n            this.disableClearListeners();\r\n        }\r\n    }\r\n\r\n    private updateGraphic(): void {\r\n        if (!this.startPoint || !this.endPoint || !this.group) return;\r\n\r\n        const [x1, y1] = this.startPoint;\r\n        const [x2, y2] = this.endPoint;\r\n\r\n        this.line.setShape({ x1, y1, x2, y2 });\r\n        this.startCircle.setShape({ cx: x1, cy: y1 });\r\n        this.endCircle.setShape({ cx: x2, cy: y2 });\r\n    }\r\n}\r\n","import * as echarts from \"echarts\";\r\nimport { AbstractPlugin } from \"../components/AbstractPlugin\";\r\n\r\nexport class FibonacciTool extends AbstractPlugin {\r\n  private startPoint: number[] | null = null;\r\n  private endPoint: number[] | null = null;\r\n  private state: \"idle\" | \"drawing\" | \"finished\" = \"idle\";\r\n\r\n  // Temporary ZRender elements\r\n  private graphicGroup: any = null;\r\n\r\n  // Fib levels config\r\n  private readonly levels = [0, 0.236, 0.382, 0.5, 0.618, 0.786, 1];\r\n  private readonly colors = [\r\n    \"#787b86\", // 0\r\n    \"#f44336\", // 0.236\r\n    \"#ff9800\", // 0.382\r\n    \"#4caf50\", // 0.5\r\n    \"#2196f3\", // 0.618\r\n    \"#00bcd4\", // 0.786\r\n    \"#787b86\", // 1\r\n  ];\r\n\r\n  constructor(options: { name?: string; icon?: string } = {}) {\r\n    super({\r\n      id: \"fibonacci-tool\",\r\n      name: options.name || \"Fibonacci Retracement\",\r\n      icon:\r\n        options.icon ||\r\n        `<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#e3e3e3\"><path d=\"M120-80v-80h720v80H120Zm0-240v-80h720v80H120Zm0-240v-80h720v80H120Zm0-240v-80h720v80H120Z\"/></svg>`,\r\n    });\r\n  }\r\n\r\n  public onActivate(): void {\r\n    this.state = \"idle\";\r\n    this.startPoint = null;\r\n    this.endPoint = null;\r\n    this.context.getChart().getZr().setCursorStyle(\"crosshair\");\r\n    this.bindEvents();\r\n  }\r\n\r\n  public onDeactivate(): void {\r\n    this.state = \"idle\";\r\n    this.startPoint = null;\r\n    this.endPoint = null;\r\n    this.removeGraphic();\r\n    this.unbindEvents();\r\n    this.context.getChart().getZr().setCursorStyle(\"default\");\r\n  }\r\n\r\n  private bindEvents() {\r\n    const zr = this.context.getChart().getZr();\r\n    zr.on(\"click\", this.onClick);\r\n    zr.on(\"mousemove\", this.onMouseMove);\r\n  }\r\n\r\n  private unbindEvents() {\r\n    const zr = this.context.getChart().getZr();\r\n    zr.off(\"click\", this.onClick);\r\n    zr.off(\"mousemove\", this.onMouseMove);\r\n  }\r\n\r\n  private onClick = (params: any) => {\r\n    if (this.state === \"idle\") {\r\n      this.state = \"drawing\";\r\n      this.startPoint = [params.offsetX, params.offsetY];\r\n      this.endPoint = [params.offsetX, params.offsetY];\r\n      this.initGraphic();\r\n      this.updateGraphic();\r\n    } else if (this.state === \"drawing\") {\r\n      this.state = \"finished\";\r\n      this.endPoint = [params.offsetX, params.offsetY];\r\n      this.updateGraphic();\r\n      this.saveDrawing();\r\n\r\n      // Cleanup local graphic and deactivate\r\n      this.removeGraphic();\r\n      this.context.disableTools();\r\n    }\r\n  };\r\n\r\n  private onMouseMove = (params: any) => {\r\n    if (this.state === \"drawing\") {\r\n      this.endPoint = [params.offsetX, params.offsetY];\r\n      this.updateGraphic();\r\n    }\r\n  };\r\n\r\n  private initGraphic() {\r\n    this.graphicGroup = new echarts.graphic.Group();\r\n    this.context.getChart().getZr().add(this.graphicGroup);\r\n  }\r\n\r\n  private removeGraphic() {\r\n    if (this.graphicGroup) {\r\n      this.context.getChart().getZr().remove(this.graphicGroup);\r\n      this.graphicGroup = null;\r\n    }\r\n  }\r\n\r\n  private updateGraphic() {\r\n    if (!this.graphicGroup || !this.startPoint || !this.endPoint) return;\r\n    this.graphicGroup.removeAll();\r\n\r\n    const x1 = this.startPoint[0];\r\n    const y1 = this.startPoint[1];\r\n    const x2 = this.endPoint[0];\r\n    const y2 = this.endPoint[1];\r\n\r\n    // Diagonal trend line\r\n    const trendLine = new echarts.graphic.Line({\r\n      shape: { x1, y1, x2, y2 },\r\n      style: {\r\n        stroke: \"#999\",\r\n        lineWidth: 1,\r\n        lineDash: [4, 4],\r\n      },\r\n      silent: true,\r\n    });\r\n    this.graphicGroup.add(trendLine);\r\n\r\n    // Levels\r\n    const startX = Math.min(x1, x2);\r\n    const endX = Math.max(x1, x2);\r\n    const width = endX - startX;\r\n\r\n    // Y range\r\n    const diffY = y2 - y1; // Pixel difference\r\n\r\n    this.levels.forEach((level, index) => {\r\n      const levelY = y2 - diffY * level;\r\n\r\n      const color = this.colors[index % this.colors.length];\r\n\r\n      // Line\r\n      const line = new echarts.graphic.Line({\r\n        shape: { x1: startX, y1: levelY, x2: endX, y2: levelY },\r\n        style: {\r\n          stroke: color,\r\n          lineWidth: 1,\r\n        },\r\n        silent: true,\r\n      });\r\n      this.graphicGroup.add(line);\r\n\r\n      if (index < this.levels.length - 1) {\r\n        const nextLevel = this.levels[index + 1];\r\n        const nextY = y2 - diffY * nextLevel;\r\n        const rectH = Math.abs(nextY - levelY);\r\n        const rectY = Math.min(levelY, nextY);\r\n\r\n        const rect = new echarts.graphic.Rect({\r\n          shape: { x: startX, y: rectY, width, height: rectH },\r\n          style: {\r\n            fill: this.colors[(index + 1) % this.colors.length], // Use next level's color\r\n            opacity: 0.1,\r\n          },\r\n          silent: true,\r\n        });\r\n        this.graphicGroup.add(rect);\r\n      }\r\n    });\r\n  }\r\n\r\n  private saveDrawing() {\r\n    if (!this.startPoint || !this.endPoint) return;\r\n\r\n    const start = this.context.coordinateConversion.pixelToData({\r\n      x: this.startPoint[0],\r\n      y: this.startPoint[1],\r\n    });\r\n    const end = this.context.coordinateConversion.pixelToData({\r\n      x: this.endPoint[0],\r\n      y: this.endPoint[1],\r\n    });\r\n\r\n    if (start && end) {\r\n      const paneIndex = start.paneIndex || 0;\r\n\r\n      this.context.addDrawing({\r\n        id: `fib-${Date.now()}`,\r\n        type: \"fibonacci\",\r\n        points: [start, end],\r\n        paneIndex: paneIndex,\r\n        style: {\r\n          color: \"#3b82f6\", // Default color, though individual lines use specific colors\r\n          lineWidth: 1,\r\n        },\r\n      });\r\n    }\r\n  }\r\n}\r\n"],"names":["__publicField","grid","xAxis","yAxis","dataZoom","dzStart","dzEnd","paneConfigs","ind","echarts"],"mappings":"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"}